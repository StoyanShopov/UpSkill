{"ast":null,"code":"\"use strict\";\n\nfunction _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = isTaxID;\n\nvar _assertString = _interopRequireDefault(require(\"./util/assertString\"));\n\nvar algorithms = _interopRequireWildcard(require(\"./util/algorithms\"));\n\nvar _isDate = _interopRequireDefault(require(\"./isDate\"));\n\nfunction _getRequireWildcardCache() {\n  if (typeof WeakMap !== \"function\") return null;\n  var cache = new WeakMap();\n\n  _getRequireWildcardCache = function _getRequireWildcardCache() {\n    return cache;\n  };\n\n  return cache;\n}\n\nfunction _interopRequireWildcard(obj) {\n  if (obj && obj.__esModule) {\n    return obj;\n  }\n\n  if (obj === null || _typeof(obj) !== \"object\" && typeof obj !== \"function\") {\n    return {\n      default: obj\n    };\n  }\n\n  var cache = _getRequireWildcardCache();\n\n  if (cache && cache.has(obj)) {\n    return cache.get(obj);\n  }\n\n  var newObj = {};\n  var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor;\n\n  for (var key in obj) {\n    if (Object.prototype.hasOwnProperty.call(obj, key)) {\n      var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null;\n\n      if (desc && (desc.get || desc.set)) {\n        Object.defineProperty(newObj, key, desc);\n      } else {\n        newObj[key] = obj[key];\n      }\n    }\n  }\n\n  newObj.default = obj;\n\n  if (cache) {\n    cache.set(obj, newObj);\n  }\n\n  return newObj;\n}\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction _toConsumableArray(arr) {\n  return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread();\n}\n\nfunction _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n\nfunction _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return _arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);\n}\n\nfunction _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && Symbol.iterator in Object(iter)) return Array.from(iter);\n}\n\nfunction _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) return _arrayLikeToArray(arr);\n}\n\nfunction _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n\n  return arr2;\n}\n/**\n * TIN Validation\n * Validates Tax Identification Numbers (TINs) from the US, EU member states and the United Kingdom.\n *\n * EU-UK:\n * National TIN validity is calculated using public algorithms as made available by DG TAXUD.\n *\n * See `https://ec.europa.eu/taxation_customs/tin/specs/FS-TIN%20Algorithms-Public.docx` for more information.\n *\n * US:\n * An Employer Identification Number (EIN), also known as a Federal Tax Identification Number,\n *  is used to identify a business entity.\n *\n * NOTES:\n *  - Prefix 47 is being reserved for future use\n *  - Prefixes 26, 27, 45, 46 and 47 were previously assigned by the Philadelphia campus.\n *\n * See `http://www.irs.gov/Businesses/Small-Businesses-&-Self-Employed/How-EINs-are-Assigned-and-Valid-EIN-Prefixes`\n * for more information.\n */\n// Locale functions\n\n/*\n * bg-BG validation function\n * (Edinen graždanski nomer (EGN/ЕГН), persons only)\n * Checks if birth date (first six digits) is valid and calculates check (last) digit\n */\n\n\nfunction bgBgCheck(tin) {\n  // Extract full year, normalize month and check birth date validity\n  var century_year = tin.slice(0, 2);\n  var month = parseInt(tin.slice(2, 4), 10);\n\n  if (month > 40) {\n    month -= 40;\n    century_year = \"20\".concat(century_year);\n  } else if (month > 20) {\n    month -= 20;\n    century_year = \"18\".concat(century_year);\n  } else {\n    century_year = \"19\".concat(century_year);\n  }\n\n  if (month < 10) {\n    month = \"0\".concat(month);\n  }\n\n  var date = \"\".concat(century_year, \"/\").concat(month, \"/\").concat(tin.slice(4, 6));\n\n  if (!(0, _isDate.default)(date, 'YYYY/MM/DD')) {\n    return false;\n  } // split digits into an array for further processing\n\n\n  var digits = tin.split('').map(function (a) {\n    return parseInt(a, 10);\n  }); // Calculate checksum by multiplying digits with fixed values\n\n  var multip_lookup = [2, 4, 8, 5, 10, 9, 7, 3, 6];\n  var checksum = 0;\n\n  for (var i = 0; i < multip_lookup.length; i++) {\n    checksum += digits[i] * multip_lookup[i];\n  }\n\n  checksum = checksum % 11 === 10 ? 0 : checksum % 11;\n  return checksum === digits[9];\n}\n/*\n * cs-CZ validation function\n * (Rodné číslo (RČ), persons only)\n * Checks if birth date (first six digits) is valid and divisibility by 11\n * Material not in DG TAXUD document sourced from:\n * -`https://lorenc.info/3MA381/overeni-spravnosti-rodneho-cisla.htm`\n * -`https://www.mvcr.cz/clanek/rady-a-sluzby-dokumenty-rodne-cislo.aspx`\n */\n\n\nfunction csCzCheck(tin) {\n  tin = tin.replace(/\\W/, ''); // Extract full year from TIN length\n\n  var full_year = parseInt(tin.slice(0, 2), 10);\n\n  if (tin.length === 10) {\n    if (full_year < 54) {\n      full_year = \"20\".concat(full_year);\n    } else {\n      full_year = \"19\".concat(full_year);\n    }\n  } else {\n    if (tin.slice(6) === '000') {\n      return false;\n    } // Three-zero serial not assigned before 1954\n\n\n    if (full_year < 54) {\n      full_year = \"19\".concat(full_year);\n    } else {\n      return false; // No 18XX years seen in any of the resources\n    }\n  } // Add missing zero if needed\n\n\n  if (full_year.length === 3) {\n    full_year = [full_year.slice(0, 2), '0', full_year.slice(2)].join('');\n  } // Extract month from TIN and normalize\n\n\n  var month = parseInt(tin.slice(2, 4), 10);\n\n  if (month > 50) {\n    month -= 50;\n  }\n\n  if (month > 20) {\n    // Month-plus-twenty was only introduced in 2004\n    if (parseInt(full_year, 10) < 2004) {\n      return false;\n    }\n\n    month -= 20;\n  }\n\n  if (month < 10) {\n    month = \"0\".concat(month);\n  } // Check date validity\n\n\n  var date = \"\".concat(full_year, \"/\").concat(month, \"/\").concat(tin.slice(4, 6));\n\n  if (!(0, _isDate.default)(date, 'YYYY/MM/DD')) {\n    return false;\n  } // Verify divisibility by 11\n\n\n  if (tin.length === 10) {\n    if (parseInt(tin, 10) % 11 !== 0) {\n      // Some numbers up to and including 1985 are still valid if\n      // check (last) digit equals 0 and modulo of first 9 digits equals 10\n      var checkdigit = parseInt(tin.slice(0, 9), 10) % 11;\n\n      if (parseInt(full_year, 10) < 1986 && checkdigit === 10) {\n        if (parseInt(tin.slice(9), 10) !== 0) {\n          return false;\n        }\n      } else {\n        return false;\n      }\n    }\n  }\n\n  return true;\n}\n/*\n * de-AT validation function\n * (Abgabenkontonummer, persons/entities)\n * Verify TIN validity by calling luhnCheck()\n */\n\n\nfunction deAtCheck(tin) {\n  return algorithms.luhnCheck(tin);\n}\n/*\n * de-DE validation function\n * (Steueridentifikationsnummer (Steuer-IdNr.), persons only)\n * Tests for single duplicate/triplicate value, then calculates ISO 7064 check (last) digit\n * Partial implementation of spec (same result with both algorithms always)\n */\n\n\nfunction deDeCheck(tin) {\n  // Split digits into an array for further processing\n  var digits = tin.split('').map(function (a) {\n    return parseInt(a, 10);\n  }); // Fill array with strings of number positions\n\n  var occurences = [];\n\n  for (var i = 0; i < digits.length - 1; i++) {\n    occurences.push('');\n\n    for (var j = 0; j < digits.length - 1; j++) {\n      if (digits[i] === digits[j]) {\n        occurences[i] += j;\n      }\n    }\n  } // Remove digits with one occurence and test for only one duplicate/triplicate\n\n\n  occurences = occurences.filter(function (a) {\n    return a.length > 1;\n  });\n\n  if (occurences.length !== 2 && occurences.length !== 3) {\n    return false;\n  } // In case of triplicate value only two digits are allowed next to each other\n\n\n  if (occurences[0].length === 3) {\n    var trip_locations = occurences[0].split('').map(function (a) {\n      return parseInt(a, 10);\n    });\n    var recurrent = 0; // Amount of neighbour occurences\n\n    for (var _i = 0; _i < trip_locations.length - 1; _i++) {\n      if (trip_locations[_i] + 1 === trip_locations[_i + 1]) {\n        recurrent += 1;\n      }\n    }\n\n    if (recurrent === 2) {\n      return false;\n    }\n  }\n\n  return algorithms.iso7064Check(tin);\n}\n/*\n * dk-DK validation function\n * (CPR-nummer (personnummer), persons only)\n * Checks if birth date (first six digits) is valid and assigned to century (seventh) digit,\n * and calculates check (last) digit\n */\n\n\nfunction dkDkCheck(tin) {\n  tin = tin.replace(/\\W/, ''); // Extract year, check if valid for given century digit and add century\n\n  var year = parseInt(tin.slice(4, 6), 10);\n  var century_digit = tin.slice(6, 7);\n\n  switch (century_digit) {\n    case '0':\n    case '1':\n    case '2':\n    case '3':\n      year = \"19\".concat(year);\n      break;\n\n    case '4':\n    case '9':\n      if (year < 37) {\n        year = \"20\".concat(year);\n      } else {\n        year = \"19\".concat(year);\n      }\n\n      break;\n\n    default:\n      if (year < 37) {\n        year = \"20\".concat(year);\n      } else if (year > 58) {\n        year = \"18\".concat(year);\n      } else {\n        return false;\n      }\n\n      break;\n  } // Add missing zero if needed\n\n\n  if (year.length === 3) {\n    year = [year.slice(0, 2), '0', year.slice(2)].join('');\n  } // Check date validity\n\n\n  var date = \"\".concat(year, \"/\").concat(tin.slice(2, 4), \"/\").concat(tin.slice(0, 2));\n\n  if (!(0, _isDate.default)(date, 'YYYY/MM/DD')) {\n    return false;\n  } // Split digits into an array for further processing\n\n\n  var digits = tin.split('').map(function (a) {\n    return parseInt(a, 10);\n  });\n  var checksum = 0;\n  var weight = 4; // Multiply by weight and add to checksum\n\n  for (var i = 0; i < 9; i++) {\n    checksum += digits[i] * weight;\n    weight -= 1;\n\n    if (weight === 1) {\n      weight = 7;\n    }\n  }\n\n  checksum %= 11;\n\n  if (checksum === 1) {\n    return false;\n  }\n\n  return checksum === 0 ? digits[9] === 0 : digits[9] === 11 - checksum;\n}\n/*\n * el-CY validation function\n * (Arithmos Forologikou Mitroou (AFM/ΑΦΜ), persons only)\n * Verify TIN validity by calculating ASCII value of check (last) character\n */\n\n\nfunction elCyCheck(tin) {\n  // split digits into an array for further processing\n  var digits = tin.slice(0, 8).split('').map(function (a) {\n    return parseInt(a, 10);\n  });\n  var checksum = 0; // add digits in even places\n\n  for (var i = 1; i < digits.length; i += 2) {\n    checksum += digits[i];\n  } // add digits in odd places\n\n\n  for (var _i2 = 0; _i2 < digits.length; _i2 += 2) {\n    if (digits[_i2] < 2) {\n      checksum += 1 - digits[_i2];\n    } else {\n      checksum += 2 * (digits[_i2] - 2) + 5;\n\n      if (digits[_i2] > 4) {\n        checksum += 2;\n      }\n    }\n  }\n\n  return String.fromCharCode(checksum % 26 + 65) === tin.charAt(8);\n}\n/*\n * el-GR validation function\n * (Arithmos Forologikou Mitroou (AFM/ΑΦΜ), persons/entities)\n * Verify TIN validity by calculating check (last) digit\n * Algorithm not in DG TAXUD document- sourced from:\n * - `http://epixeirisi.gr/%CE%9A%CE%A1%CE%99%CE%A3%CE%99%CE%9C%CE%91-%CE%98%CE%95%CE%9C%CE%91%CE%A4%CE%91-%CE%A6%CE%9F%CE%A1%CE%9F%CE%9B%CE%9F%CE%93%CE%99%CE%91%CE%A3-%CE%9A%CE%91%CE%99-%CE%9B%CE%9F%CE%93%CE%99%CE%A3%CE%A4%CE%99%CE%9A%CE%97%CE%A3/23791/%CE%91%CF%81%CE%B9%CE%B8%CE%BC%CF%8C%CF%82-%CE%A6%CE%BF%CF%81%CE%BF%CE%BB%CE%BF%CE%B3%CE%B9%CE%BA%CE%BF%CF%8D-%CE%9C%CE%B7%CF%84%CF%81%CF%8E%CE%BF%CF%85`\n */\n\n\nfunction elGrCheck(tin) {\n  // split digits into an array for further processing\n  var digits = tin.split('').map(function (a) {\n    return parseInt(a, 10);\n  });\n  var checksum = 0;\n\n  for (var i = 0; i < 8; i++) {\n    checksum += digits[i] * Math.pow(2, 8 - i);\n  }\n\n  return checksum % 11 % 10 === digits[8];\n}\n/*\n * en-GB validation function (should go here if needed)\n * (National Insurance Number (NINO) or Unique Taxpayer Reference (UTR),\n * persons/entities respectively)\n */\n\n/*\n * en-IE validation function\n * (Personal Public Service Number (PPS No), persons only)\n * Verify TIN validity by calculating check (second to last) character\n */\n\n\nfunction enIeCheck(tin) {\n  var checksum = algorithms.reverseMultiplyAndSum(tin.split('').slice(0, 7).map(function (a) {\n    return parseInt(a, 10);\n  }), 8);\n\n  if (tin.length === 9 && tin[8] !== 'W') {\n    checksum += (tin[8].charCodeAt(0) - 64) * 9;\n  }\n\n  checksum %= 23;\n\n  if (checksum === 0) {\n    return tin[7].toUpperCase() === 'W';\n  }\n\n  return tin[7].toUpperCase() === String.fromCharCode(64 + checksum);\n} // Valid US IRS campus prefixes\n\n\nvar enUsCampusPrefix = {\n  andover: ['10', '12'],\n  atlanta: ['60', '67'],\n  austin: ['50', '53'],\n  brookhaven: ['01', '02', '03', '04', '05', '06', '11', '13', '14', '16', '21', '22', '23', '25', '34', '51', '52', '54', '55', '56', '57', '58', '59', '65'],\n  cincinnati: ['30', '32', '35', '36', '37', '38', '61'],\n  fresno: ['15', '24'],\n  internet: ['20', '26', '27', '45', '46', '47'],\n  kansas: ['40', '44'],\n  memphis: ['94', '95'],\n  ogden: ['80', '90'],\n  philadelphia: ['33', '39', '41', '42', '43', '46', '48', '62', '63', '64', '66', '68', '71', '72', '73', '74', '75', '76', '77', '81', '82', '83', '84', '85', '86', '87', '88', '91', '92', '93', '98', '99'],\n  sba: ['31']\n}; // Return an array of all US IRS campus prefixes\n\nfunction enUsGetPrefixes() {\n  var prefixes = [];\n\n  for (var location in enUsCampusPrefix) {\n    // https://github.com/gotwarlost/istanbul/blob/master/ignoring-code-for-coverage.md#ignoring-code-for-coverage-purposes\n    // istanbul ignore else\n    if (enUsCampusPrefix.hasOwnProperty(location)) {\n      prefixes.push.apply(prefixes, _toConsumableArray(enUsCampusPrefix[location]));\n    }\n  }\n\n  return prefixes;\n}\n/*\n * en-US validation function\n * Verify that the TIN starts with a valid IRS campus prefix\n */\n\n\nfunction enUsCheck(tin) {\n  return enUsGetPrefixes().indexOf(tin.substr(0, 2)) !== -1;\n}\n/*\n * es-ES validation function\n * (Documento Nacional de Identidad (DNI)\n * or Número de Identificación de Extranjero (NIE), persons only)\n * Verify TIN validity by calculating check (last) character\n */\n\n\nfunction esEsCheck(tin) {\n  // Split characters into an array for further processing\n  var chars = tin.toUpperCase().split(''); // Replace initial letter if needed\n\n  if (isNaN(parseInt(chars[0], 10)) && chars.length > 1) {\n    var lead_replace = 0;\n\n    switch (chars[0]) {\n      case 'Y':\n        lead_replace = 1;\n        break;\n\n      case 'Z':\n        lead_replace = 2;\n        break;\n\n      default:\n    }\n\n    chars.splice(0, 1, lead_replace); // Fill with zeros if smaller than proper\n  } else {\n    while (chars.length < 9) {\n      chars.unshift(0);\n    }\n  } // Calculate checksum and check according to lookup\n\n\n  var lookup = ['T', 'R', 'W', 'A', 'G', 'M', 'Y', 'F', 'P', 'D', 'X', 'B', 'N', 'J', 'Z', 'S', 'Q', 'V', 'H', 'L', 'C', 'K', 'E'];\n  chars = chars.join('');\n  var checksum = parseInt(chars.slice(0, 8), 10) % 23;\n  return chars[8] === lookup[checksum];\n}\n/*\n * et-EE validation function\n * (Isikukood (IK), persons only)\n * Checks if birth date (century digit and six following) is valid and calculates check (last) digit\n * Material not in DG TAXUD document sourced from:\n * - `https://www.oecd.org/tax/automatic-exchange/crs-implementation-and-assistance/tax-identification-numbers/Estonia-TIN.pdf`\n */\n\n\nfunction etEeCheck(tin) {\n  // Extract year and add century\n  var full_year = tin.slice(1, 3);\n  var century_digit = tin.slice(0, 1);\n\n  switch (century_digit) {\n    case '1':\n    case '2':\n      full_year = \"18\".concat(full_year);\n      break;\n\n    case '3':\n    case '4':\n      full_year = \"19\".concat(full_year);\n      break;\n\n    default:\n      full_year = \"20\".concat(full_year);\n      break;\n  } // Check date validity\n\n\n  var date = \"\".concat(full_year, \"/\").concat(tin.slice(3, 5), \"/\").concat(tin.slice(5, 7));\n\n  if (!(0, _isDate.default)(date, 'YYYY/MM/DD')) {\n    return false;\n  } // Split digits into an array for further processing\n\n\n  var digits = tin.split('').map(function (a) {\n    return parseInt(a, 10);\n  });\n  var checksum = 0;\n  var weight = 1; // Multiply by weight and add to checksum\n\n  for (var i = 0; i < 10; i++) {\n    checksum += digits[i] * weight;\n    weight += 1;\n\n    if (weight === 10) {\n      weight = 1;\n    }\n  } // Do again if modulo 11 of checksum is 10\n\n\n  if (checksum % 11 === 10) {\n    checksum = 0;\n    weight = 3;\n\n    for (var _i3 = 0; _i3 < 10; _i3++) {\n      checksum += digits[_i3] * weight;\n      weight += 1;\n\n      if (weight === 10) {\n        weight = 1;\n      }\n    }\n\n    if (checksum % 11 === 10) {\n      return digits[10] === 0;\n    }\n  }\n\n  return checksum % 11 === digits[10];\n}\n/*\n * fi-FI validation function\n * (Henkilötunnus (HETU), persons only)\n * Checks if birth date (first six digits plus century symbol) is valid\n * and calculates check (last) digit\n */\n\n\nfunction fiFiCheck(tin) {\n  // Extract year and add century\n  var full_year = tin.slice(4, 6);\n  var century_symbol = tin.slice(6, 7);\n\n  switch (century_symbol) {\n    case '+':\n      full_year = \"18\".concat(full_year);\n      break;\n\n    case '-':\n      full_year = \"19\".concat(full_year);\n      break;\n\n    default:\n      full_year = \"20\".concat(full_year);\n      break;\n  } // Check date validity\n\n\n  var date = \"\".concat(full_year, \"/\").concat(tin.slice(2, 4), \"/\").concat(tin.slice(0, 2));\n\n  if (!(0, _isDate.default)(date, 'YYYY/MM/DD')) {\n    return false;\n  } // Calculate check character\n\n\n  var checksum = parseInt(tin.slice(0, 6) + tin.slice(7, 10), 10) % 31;\n\n  if (checksum < 10) {\n    return checksum === parseInt(tin.slice(10), 10);\n  }\n\n  checksum -= 10;\n  var letters_lookup = ['A', 'B', 'C', 'D', 'E', 'F', 'H', 'J', 'K', 'L', 'M', 'N', 'P', 'R', 'S', 'T', 'U', 'V', 'W', 'X', 'Y'];\n  return letters_lookup[checksum] === tin.slice(10);\n}\n/*\n * fr/nl-BE validation function\n * (Numéro national (N.N.), persons only)\n * Checks if birth date (first six digits) is valid and calculates check (last two) digits\n */\n\n\nfunction frBeCheck(tin) {\n  // Zero month/day value is acceptable\n  if (tin.slice(2, 4) !== '00' || tin.slice(4, 6) !== '00') {\n    // Extract date from first six digits of TIN\n    var date = \"\".concat(tin.slice(0, 2), \"/\").concat(tin.slice(2, 4), \"/\").concat(tin.slice(4, 6));\n\n    if (!(0, _isDate.default)(date, 'YY/MM/DD')) {\n      return false;\n    }\n  }\n\n  var checksum = 97 - parseInt(tin.slice(0, 9), 10) % 97;\n  var checkdigits = parseInt(tin.slice(9, 11), 10);\n\n  if (checksum !== checkdigits) {\n    checksum = 97 - parseInt(\"2\".concat(tin.slice(0, 9)), 10) % 97;\n\n    if (checksum !== checkdigits) {\n      return false;\n    }\n  }\n\n  return true;\n}\n/*\n * fr-FR validation function\n * (Numéro fiscal de référence (numéro SPI), persons only)\n * Verify TIN validity by calculating check (last three) digits\n */\n\n\nfunction frFrCheck(tin) {\n  tin = tin.replace(/\\s/g, '');\n  var checksum = parseInt(tin.slice(0, 10), 10) % 511;\n  var checkdigits = parseInt(tin.slice(10, 13), 10);\n  return checksum === checkdigits;\n}\n/*\n * fr/lb-LU validation function\n * (numéro d’identification personnelle, persons only)\n * Verify birth date validity and run Luhn and Verhoeff checks\n */\n\n\nfunction frLuCheck(tin) {\n  // Extract date and check validity\n  var date = \"\".concat(tin.slice(0, 4), \"/\").concat(tin.slice(4, 6), \"/\").concat(tin.slice(6, 8));\n\n  if (!(0, _isDate.default)(date, 'YYYY/MM/DD')) {\n    return false;\n  } // Run Luhn check\n\n\n  if (!algorithms.luhnCheck(tin.slice(0, 12))) {\n    return false;\n  } // Remove Luhn check digit and run Verhoeff check\n\n\n  return algorithms.verhoeffCheck(\"\".concat(tin.slice(0, 11)).concat(tin[12]));\n}\n/*\n * hr-HR validation function\n * (Osobni identifikacijski broj (OIB), persons/entities)\n * Verify TIN validity by calling iso7064Check(digits)\n */\n\n\nfunction hrHrCheck(tin) {\n  return algorithms.iso7064Check(tin);\n}\n/*\n * hu-HU validation function\n * (Adóazonosító jel, persons only)\n * Verify TIN validity by calculating check (last) digit\n */\n\n\nfunction huHuCheck(tin) {\n  // split digits into an array for further processing\n  var digits = tin.split('').map(function (a) {\n    return parseInt(a, 10);\n  });\n  var checksum = 8;\n\n  for (var i = 1; i < 9; i++) {\n    checksum += digits[i] * (i + 1);\n  }\n\n  return checksum % 11 === digits[9];\n}\n/*\n * lt-LT validation function (should go here if needed)\n * (Asmens kodas, persons/entities respectively)\n * Current validation check is alias of etEeCheck- same format applies\n */\n\n/*\n * it-IT first/last name validity check\n * Accepts it-IT TIN-encoded names as a three-element character array and checks their validity\n * Due to lack of clarity between resources (\"Are only Italian consonants used?\n * What happens if a person has X in their name?\" etc.) only two test conditions\n * have been implemented:\n * Vowels may only be followed by other vowels or an X character\n * and X characters after vowels may only be followed by other X characters.\n */\n\n\nfunction itItNameCheck(name) {\n  // true at the first occurence of a vowel\n  var vowelflag = false; // true at the first occurence of an X AFTER vowel\n  // (to properly handle last names with X as consonant)\n\n  var xflag = false;\n\n  for (var i = 0; i < 3; i++) {\n    if (!vowelflag && /[AEIOU]/.test(name[i])) {\n      vowelflag = true;\n    } else if (!xflag && vowelflag && name[i] === 'X') {\n      xflag = true;\n    } else if (i > 0) {\n      if (vowelflag && !xflag) {\n        if (!/[AEIOU]/.test(name[i])) {\n          return false;\n        }\n      }\n\n      if (xflag) {\n        if (!/X/.test(name[i])) {\n          return false;\n        }\n      }\n    }\n  }\n\n  return true;\n}\n/*\n * it-IT validation function\n * (Codice fiscale (TIN-IT), persons only)\n * Verify name, birth date and codice catastale validity\n * and calculate check character.\n * Material not in DG-TAXUD document sourced from:\n * `https://en.wikipedia.org/wiki/Italian_fiscal_code`\n */\n\n\nfunction itItCheck(tin) {\n  // Capitalize and split characters into an array for further processing\n  var chars = tin.toUpperCase().split(''); // Check first and last name validity calling itItNameCheck()\n\n  if (!itItNameCheck(chars.slice(0, 3))) {\n    return false;\n  }\n\n  if (!itItNameCheck(chars.slice(3, 6))) {\n    return false;\n  } // Convert letters in number spaces back to numbers if any\n\n\n  var number_locations = [6, 7, 9, 10, 12, 13, 14];\n  var number_replace = {\n    L: '0',\n    M: '1',\n    N: '2',\n    P: '3',\n    Q: '4',\n    R: '5',\n    S: '6',\n    T: '7',\n    U: '8',\n    V: '9'\n  };\n\n  for (var _i4 = 0, _number_locations = number_locations; _i4 < _number_locations.length; _i4++) {\n    var i = _number_locations[_i4];\n\n    if (chars[i] in number_replace) {\n      chars.splice(i, 1, number_replace[chars[i]]);\n    }\n  } // Extract month and day, and check date validity\n\n\n  var month_replace = {\n    A: '01',\n    B: '02',\n    C: '03',\n    D: '04',\n    E: '05',\n    H: '06',\n    L: '07',\n    M: '08',\n    P: '09',\n    R: '10',\n    S: '11',\n    T: '12'\n  };\n  var month = month_replace[chars[8]];\n  var day = parseInt(chars[9] + chars[10], 10);\n\n  if (day > 40) {\n    day -= 40;\n  }\n\n  if (day < 10) {\n    day = \"0\".concat(day);\n  }\n\n  var date = \"\".concat(chars[6]).concat(chars[7], \"/\").concat(month, \"/\").concat(day);\n\n  if (!(0, _isDate.default)(date, 'YY/MM/DD')) {\n    return false;\n  } // Calculate check character by adding up even and odd characters as numbers\n\n\n  var checksum = 0;\n\n  for (var _i5 = 1; _i5 < chars.length - 1; _i5 += 2) {\n    var char_to_int = parseInt(chars[_i5], 10);\n\n    if (isNaN(char_to_int)) {\n      char_to_int = chars[_i5].charCodeAt(0) - 65;\n    }\n\n    checksum += char_to_int;\n  }\n\n  var odd_convert = {\n    // Maps of characters at odd places\n    A: 1,\n    B: 0,\n    C: 5,\n    D: 7,\n    E: 9,\n    F: 13,\n    G: 15,\n    H: 17,\n    I: 19,\n    J: 21,\n    K: 2,\n    L: 4,\n    M: 18,\n    N: 20,\n    O: 11,\n    P: 3,\n    Q: 6,\n    R: 8,\n    S: 12,\n    T: 14,\n    U: 16,\n    V: 10,\n    W: 22,\n    X: 25,\n    Y: 24,\n    Z: 23,\n    0: 1,\n    1: 0\n  };\n\n  for (var _i6 = 0; _i6 < chars.length - 1; _i6 += 2) {\n    var _char_to_int = 0;\n\n    if (chars[_i6] in odd_convert) {\n      _char_to_int = odd_convert[chars[_i6]];\n    } else {\n      var multiplier = parseInt(chars[_i6], 10);\n      _char_to_int = 2 * multiplier + 1;\n\n      if (multiplier > 4) {\n        _char_to_int += 2;\n      }\n    }\n\n    checksum += _char_to_int;\n  }\n\n  if (String.fromCharCode(65 + checksum % 26) !== chars[15]) {\n    return false;\n  }\n\n  return true;\n}\n/*\n * lv-LV validation function\n * (Personas kods (PK), persons only)\n * Check validity of birth date and calculate check (last) digit\n * Support only for old format numbers (not starting with '32', issued before 2017/07/01)\n * Material not in DG TAXUD document sourced from:\n * `https://boot.ritakafija.lv/forums/index.php?/topic/88314-personas-koda-algoritms-%C4%8Deksumma/`\n */\n\n\nfunction lvLvCheck(tin) {\n  tin = tin.replace(/\\W/, ''); // Extract date from TIN\n\n  var day = tin.slice(0, 2);\n\n  if (day !== '32') {\n    // No date/checksum check if new format\n    var month = tin.slice(2, 4);\n\n    if (month !== '00') {\n      // No date check if unknown month\n      var full_year = tin.slice(4, 6);\n\n      switch (tin[6]) {\n        case '0':\n          full_year = \"18\".concat(full_year);\n          break;\n\n        case '1':\n          full_year = \"19\".concat(full_year);\n          break;\n\n        default:\n          full_year = \"20\".concat(full_year);\n          break;\n      } // Check date validity\n\n\n      var date = \"\".concat(full_year, \"/\").concat(tin.slice(2, 4), \"/\").concat(day);\n\n      if (!(0, _isDate.default)(date, 'YYYY/MM/DD')) {\n        return false;\n      }\n    } // Calculate check digit\n\n\n    var checksum = 1101;\n    var multip_lookup = [1, 6, 3, 7, 9, 10, 5, 8, 4, 2];\n\n    for (var i = 0; i < tin.length - 1; i++) {\n      checksum -= parseInt(tin[i], 10) * multip_lookup[i];\n    }\n\n    return parseInt(tin[10], 10) === checksum % 11;\n  }\n\n  return true;\n}\n/*\n * mt-MT validation function\n * (Identity Card Number or Unique Taxpayer Reference, persons/entities)\n * Verify Identity Card Number structure (no other tests found)\n */\n\n\nfunction mtMtCheck(tin) {\n  if (tin.length !== 9) {\n    // No tests for UTR\n    var chars = tin.toUpperCase().split(''); // Fill with zeros if smaller than proper\n\n    while (chars.length < 8) {\n      chars.unshift(0);\n    } // Validate format according to last character\n\n\n    switch (tin[7]) {\n      case 'A':\n      case 'P':\n        if (parseInt(chars[6], 10) === 0) {\n          return false;\n        }\n\n        break;\n\n      default:\n        {\n          var first_part = parseInt(chars.join('').slice(0, 5), 10);\n\n          if (first_part > 32000) {\n            return false;\n          }\n\n          var second_part = parseInt(chars.join('').slice(5, 7), 10);\n\n          if (first_part === second_part) {\n            return false;\n          }\n        }\n    }\n  }\n\n  return true;\n}\n/*\n * nl-NL validation function\n * (Burgerservicenummer (BSN) or Rechtspersonen Samenwerkingsverbanden Informatie Nummer (RSIN),\n * persons/entities respectively)\n * Verify TIN validity by calculating check (last) digit (variant of MOD 11)\n */\n\n\nfunction nlNlCheck(tin) {\n  return algorithms.reverseMultiplyAndSum(tin.split('').slice(0, 8).map(function (a) {\n    return parseInt(a, 10);\n  }), 9) % 11 === parseInt(tin[8], 10);\n}\n/*\n * pl-PL validation function\n * (Powszechny Elektroniczny System Ewidencji Ludności (PESEL)\n * or Numer identyfikacji podatkowej (NIP), persons/entities)\n * Verify TIN validity by validating birth date (PESEL) and calculating check (last) digit\n */\n\n\nfunction plPlCheck(tin) {\n  // NIP\n  if (tin.length === 10) {\n    // Calculate last digit by multiplying with lookup\n    var lookup = [6, 5, 7, 2, 3, 4, 5, 6, 7];\n    var _checksum = 0;\n\n    for (var i = 0; i < lookup.length; i++) {\n      _checksum += parseInt(tin[i], 10) * lookup[i];\n    }\n\n    _checksum %= 11;\n\n    if (_checksum === 10) {\n      return false;\n    }\n\n    return _checksum === parseInt(tin[9], 10);\n  } // PESEL\n  // Extract full year using month\n\n\n  var full_year = tin.slice(0, 2);\n  var month = parseInt(tin.slice(2, 4), 10);\n\n  if (month > 80) {\n    full_year = \"18\".concat(full_year);\n    month -= 80;\n  } else if (month > 60) {\n    full_year = \"22\".concat(full_year);\n    month -= 60;\n  } else if (month > 40) {\n    full_year = \"21\".concat(full_year);\n    month -= 40;\n  } else if (month > 20) {\n    full_year = \"20\".concat(full_year);\n    month -= 20;\n  } else {\n    full_year = \"19\".concat(full_year);\n  } // Add leading zero to month if needed\n\n\n  if (month < 10) {\n    month = \"0\".concat(month);\n  } // Check date validity\n\n\n  var date = \"\".concat(full_year, \"/\").concat(month, \"/\").concat(tin.slice(4, 6));\n\n  if (!(0, _isDate.default)(date, 'YYYY/MM/DD')) {\n    return false;\n  } // Calculate last digit by mulitplying with odd one-digit numbers except 5\n\n\n  var checksum = 0;\n  var multiplier = 1;\n\n  for (var _i7 = 0; _i7 < tin.length - 1; _i7++) {\n    checksum += parseInt(tin[_i7], 10) * multiplier % 10;\n    multiplier += 2;\n\n    if (multiplier > 10) {\n      multiplier = 1;\n    } else if (multiplier === 5) {\n      multiplier += 2;\n    }\n  }\n\n  checksum = 10 - checksum % 10;\n  return checksum === parseInt(tin[10], 10);\n}\n/*\n* pt-BR validation function\n* (Cadastro de Pessoas Físicas (CPF, persons)\n* Cadastro Nacional de Pessoas Jurídicas (CNPJ, entities)\n* Both inputs will be validated\n*/\n\n\nfunction ptBrCheck(tin) {\n  tin = tin.replace(/[^\\d]+/g, '');\n  if (tin === '') return false;\n\n  if (tin.length === 11) {\n    var _sum;\n\n    var ramainder;\n    _sum = 0;\n    tin = tin.replace(/[^\\d]+/g, '');\n    if ( // Reject known invalid CPFs\n    tin === '11111111111' || tin === '22222222222' || tin === '33333333333' || tin === '44444444444' || tin === '55555555555' || tin === '66666666666' || tin === '77777777777' || tin === '88888888888' || tin === '99999999999' || tin === '00000000000') return false;\n\n    for (var i = 1; i <= 9; i++) {\n      _sum += parseInt(tin.substring(i - 1, i), 10) * (11 - i);\n    }\n\n    ramainder = _sum * 10 % 11;\n    if (ramainder === 10 || ramainder === 11) ramainder = 0;\n    if (ramainder !== parseInt(tin.substring(9, 10), 10)) return false;\n    _sum = 0;\n\n    for (var _i8 = 1; _i8 <= 10; _i8++) {\n      _sum += parseInt(tin.substring(_i8 - 1, _i8), 10) * (12 - _i8);\n    }\n\n    ramainder = _sum * 10 % 11;\n    if (ramainder === 10 || ramainder === 11) ramainder = 0;\n    if (ramainder !== parseInt(tin.substring(10, 11), 10)) return false;\n    return true;\n  }\n\n  if (tin.length !== 14) {\n    return false;\n  }\n\n  if ( // Reject know invalid CNPJs\n  tin === '00000000000000' || tin === '11111111111111' || tin === '22222222222222' || tin === '33333333333333' || tin === '44444444444444' || tin === '55555555555555' || tin === '66666666666666' || tin === '77777777777777' || tin === '88888888888888' || tin === '99999999999999') {\n    return false;\n  }\n\n  var length = tin.length - 2;\n  var identifiers = tin.substring(0, length);\n  var verificators = tin.substring(length);\n  var sum = 0;\n  var pos = length - 7;\n\n  for (var _i9 = length; _i9 >= 1; _i9--) {\n    sum += identifiers.charAt(length - _i9) * pos;\n    pos -= 1;\n\n    if (pos < 2) {\n      pos = 9;\n    }\n  }\n\n  var result = sum % 11 < 2 ? 0 : 11 - sum % 11;\n\n  if (result !== parseInt(verificators.charAt(0), 10)) {\n    return false;\n  }\n\n  length += 1;\n  identifiers = tin.substring(0, length);\n  sum = 0;\n  pos = length - 7;\n\n  for (var _i10 = length; _i10 >= 1; _i10--) {\n    sum += identifiers.charAt(length - _i10) * pos;\n    pos -= 1;\n\n    if (pos < 2) {\n      pos = 9;\n    }\n  }\n\n  result = sum % 11 < 2 ? 0 : 11 - sum % 11;\n\n  if (result !== parseInt(verificators.charAt(1), 10)) {\n    return false;\n  }\n\n  return true;\n}\n/*\n * pt-PT validation function\n * (Número de identificação fiscal (NIF), persons/entities)\n * Verify TIN validity by calculating check (last) digit (variant of MOD 11)\n */\n\n\nfunction ptPtCheck(tin) {\n  var checksum = 11 - algorithms.reverseMultiplyAndSum(tin.split('').slice(0, 8).map(function (a) {\n    return parseInt(a, 10);\n  }), 9) % 11;\n\n  if (checksum > 9) {\n    return parseInt(tin[8], 10) === 0;\n  }\n\n  return checksum === parseInt(tin[8], 10);\n}\n/*\n * ro-RO validation function\n * (Cod Numeric Personal (CNP) or Cod de înregistrare fiscală (CIF),\n * persons only)\n * Verify CNP validity by calculating check (last) digit (test not found for CIF)\n * Material not in DG TAXUD document sourced from:\n * `https://en.wikipedia.org/wiki/National_identification_number#Romania`\n */\n\n\nfunction roRoCheck(tin) {\n  if (tin.slice(0, 4) !== '9000') {\n    // No test found for this format\n    // Extract full year using century digit if possible\n    var full_year = tin.slice(1, 3);\n\n    switch (tin[0]) {\n      case '1':\n      case '2':\n        full_year = \"19\".concat(full_year);\n        break;\n\n      case '3':\n      case '4':\n        full_year = \"18\".concat(full_year);\n        break;\n\n      case '5':\n      case '6':\n        full_year = \"20\".concat(full_year);\n        break;\n\n      default:\n    } // Check date validity\n\n\n    var date = \"\".concat(full_year, \"/\").concat(tin.slice(3, 5), \"/\").concat(tin.slice(5, 7));\n\n    if (date.length === 8) {\n      if (!(0, _isDate.default)(date, 'YY/MM/DD')) {\n        return false;\n      }\n    } else if (!(0, _isDate.default)(date, 'YYYY/MM/DD')) {\n      return false;\n    } // Calculate check digit\n\n\n    var digits = tin.split('').map(function (a) {\n      return parseInt(a, 10);\n    });\n    var multipliers = [2, 7, 9, 1, 4, 6, 3, 5, 8, 2, 7, 9];\n    var checksum = 0;\n\n    for (var i = 0; i < multipliers.length; i++) {\n      checksum += digits[i] * multipliers[i];\n    }\n\n    if (checksum % 11 === 10) {\n      return digits[12] === 1;\n    }\n\n    return digits[12] === checksum % 11;\n  }\n\n  return true;\n}\n/*\n * sk-SK validation function\n * (Rodné číslo (RČ) or bezvýznamové identifikačné číslo (BIČ), persons only)\n * Checks validity of pre-1954 birth numbers (rodné číslo) only\n * Due to the introduction of the pseudo-random BIČ it is not possible to test\n * post-1954 birth numbers without knowing whether they are BIČ or RČ beforehand\n */\n\n\nfunction skSkCheck(tin) {\n  if (tin.length === 9) {\n    tin = tin.replace(/\\W/, '');\n\n    if (tin.slice(6) === '000') {\n      return false;\n    } // Three-zero serial not assigned before 1954\n    // Extract full year from TIN length\n\n\n    var full_year = parseInt(tin.slice(0, 2), 10);\n\n    if (full_year > 53) {\n      return false;\n    }\n\n    if (full_year < 10) {\n      full_year = \"190\".concat(full_year);\n    } else {\n      full_year = \"19\".concat(full_year);\n    } // Extract month from TIN and normalize\n\n\n    var month = parseInt(tin.slice(2, 4), 10);\n\n    if (month > 50) {\n      month -= 50;\n    }\n\n    if (month < 10) {\n      month = \"0\".concat(month);\n    } // Check date validity\n\n\n    var date = \"\".concat(full_year, \"/\").concat(month, \"/\").concat(tin.slice(4, 6));\n\n    if (!(0, _isDate.default)(date, 'YYYY/MM/DD')) {\n      return false;\n    }\n  }\n\n  return true;\n}\n/*\n * sl-SI validation function\n * (Davčna številka, persons/entities)\n * Verify TIN validity by calculating check (last) digit (variant of MOD 11)\n */\n\n\nfunction slSiCheck(tin) {\n  var checksum = 11 - algorithms.reverseMultiplyAndSum(tin.split('').slice(0, 7).map(function (a) {\n    return parseInt(a, 10);\n  }), 8) % 11;\n\n  if (checksum === 10) {\n    return parseInt(tin[7], 10) === 0;\n  }\n\n  return checksum === parseInt(tin[7], 10);\n}\n/*\n * sv-SE validation function\n * (Personnummer or samordningsnummer, persons only)\n * Checks validity of birth date and calls luhnCheck() to validate check (last) digit\n */\n\n\nfunction svSeCheck(tin) {\n  // Make copy of TIN and normalize to two-digit year form\n  var tin_copy = tin.slice(0);\n\n  if (tin.length > 11) {\n    tin_copy = tin_copy.slice(2);\n  } // Extract date of birth\n\n\n  var full_year = '';\n  var month = tin_copy.slice(2, 4);\n  var day = parseInt(tin_copy.slice(4, 6), 10);\n\n  if (tin.length > 11) {\n    full_year = tin.slice(0, 4);\n  } else {\n    full_year = tin.slice(0, 2);\n\n    if (tin.length === 11 && day < 60) {\n      // Extract full year from centenarian symbol\n      // Should work just fine until year 10000 or so\n      var current_year = new Date().getFullYear().toString();\n      var current_century = parseInt(current_year.slice(0, 2), 10);\n      current_year = parseInt(current_year, 10);\n\n      if (tin[6] === '-') {\n        if (parseInt(\"\".concat(current_century).concat(full_year), 10) > current_year) {\n          full_year = \"\".concat(current_century - 1).concat(full_year);\n        } else {\n          full_year = \"\".concat(current_century).concat(full_year);\n        }\n      } else {\n        full_year = \"\".concat(current_century - 1).concat(full_year);\n\n        if (current_year - parseInt(full_year, 10) < 100) {\n          return false;\n        }\n      }\n    }\n  } // Normalize day and check date validity\n\n\n  if (day > 60) {\n    day -= 60;\n  }\n\n  if (day < 10) {\n    day = \"0\".concat(day);\n  }\n\n  var date = \"\".concat(full_year, \"/\").concat(month, \"/\").concat(day);\n\n  if (date.length === 8) {\n    if (!(0, _isDate.default)(date, 'YY/MM/DD')) {\n      return false;\n    }\n  } else if (!(0, _isDate.default)(date, 'YYYY/MM/DD')) {\n    return false;\n  }\n\n  return algorithms.luhnCheck(tin.replace(/\\W/, ''));\n} // Locale lookup objects\n\n/*\n * Tax id regex formats for various locales\n *\n * Where not explicitly specified in DG-TAXUD document both\n * uppercase and lowercase letters are acceptable.\n */\n\n\nvar taxIdFormat = {\n  'bg-BG': /^\\d{10}$/,\n  'cs-CZ': /^\\d{6}\\/{0,1}\\d{3,4}$/,\n  'de-AT': /^\\d{9}$/,\n  'de-DE': /^[1-9]\\d{10}$/,\n  'dk-DK': /^\\d{6}-{0,1}\\d{4}$/,\n  'el-CY': /^[09]\\d{7}[A-Z]$/,\n  'el-GR': /^([0-4]|[7-9])\\d{8}$/,\n  'en-GB': /^\\d{10}$|^(?!GB|NK|TN|ZZ)(?![DFIQUV])[A-Z](?![DFIQUVO])[A-Z]\\d{6}[ABCD ]$/i,\n  'en-IE': /^\\d{7}[A-W][A-IW]{0,1}$/i,\n  'en-US': /^\\d{2}[- ]{0,1}\\d{7}$/,\n  'es-ES': /^(\\d{0,8}|[XYZKLM]\\d{7})[A-HJ-NP-TV-Z]$/i,\n  'et-EE': /^[1-6]\\d{6}(00[1-9]|0[1-9][0-9]|[1-6][0-9]{2}|70[0-9]|710)\\d$/,\n  'fi-FI': /^\\d{6}[-+A]\\d{3}[0-9A-FHJ-NPR-Y]$/i,\n  'fr-BE': /^\\d{11}$/,\n  'fr-FR': /^[0-3]\\d{12}$|^[0-3]\\d\\s\\d{2}(\\s\\d{3}){3}$/,\n  // Conforms both to official spec and provided example\n  'fr-LU': /^\\d{13}$/,\n  'hr-HR': /^\\d{11}$/,\n  'hu-HU': /^8\\d{9}$/,\n  'it-IT': /^[A-Z]{6}[L-NP-V0-9]{2}[A-EHLMPRST][L-NP-V0-9]{2}[A-ILMZ][L-NP-V0-9]{3}[A-Z]$/i,\n  'lv-LV': /^\\d{6}-{0,1}\\d{5}$/,\n  // Conforms both to DG TAXUD spec and original research\n  'mt-MT': /^\\d{3,7}[APMGLHBZ]$|^([1-8])\\1\\d{7}$/i,\n  'nl-NL': /^\\d{9}$/,\n  'pl-PL': /^\\d{10,11}$/,\n  'pt-BR': /^\\d{11,14}$/,\n  'pt-PT': /^\\d{9}$/,\n  'ro-RO': /^\\d{13}$/,\n  'sk-SK': /^\\d{6}\\/{0,1}\\d{3,4}$/,\n  'sl-SI': /^[1-9]\\d{7}$/,\n  'sv-SE': /^(\\d{6}[-+]{0,1}\\d{4}|(18|19|20)\\d{6}[-+]{0,1}\\d{4})$/\n}; // taxIdFormat locale aliases\n\ntaxIdFormat['lb-LU'] = taxIdFormat['fr-LU'];\ntaxIdFormat['lt-LT'] = taxIdFormat['et-EE'];\ntaxIdFormat['nl-BE'] = taxIdFormat['fr-BE']; // Algorithmic tax id check functions for various locales\n\nvar taxIdCheck = {\n  'bg-BG': bgBgCheck,\n  'cs-CZ': csCzCheck,\n  'de-AT': deAtCheck,\n  'de-DE': deDeCheck,\n  'dk-DK': dkDkCheck,\n  'el-CY': elCyCheck,\n  'el-GR': elGrCheck,\n  'en-IE': enIeCheck,\n  'en-US': enUsCheck,\n  'es-ES': esEsCheck,\n  'et-EE': etEeCheck,\n  'fi-FI': fiFiCheck,\n  'fr-BE': frBeCheck,\n  'fr-FR': frFrCheck,\n  'fr-LU': frLuCheck,\n  'hr-HR': hrHrCheck,\n  'hu-HU': huHuCheck,\n  'it-IT': itItCheck,\n  'lv-LV': lvLvCheck,\n  'mt-MT': mtMtCheck,\n  'nl-NL': nlNlCheck,\n  'pl-PL': plPlCheck,\n  'pt-BR': ptBrCheck,\n  'pt-PT': ptPtCheck,\n  'ro-RO': roRoCheck,\n  'sk-SK': skSkCheck,\n  'sl-SI': slSiCheck,\n  'sv-SE': svSeCheck\n}; // taxIdCheck locale aliases\n\ntaxIdCheck['lb-LU'] = taxIdCheck['fr-LU'];\ntaxIdCheck['lt-LT'] = taxIdCheck['et-EE'];\ntaxIdCheck['nl-BE'] = taxIdCheck['fr-BE']; // Regexes for locales where characters should be omitted before checking format\n\nvar allsymbols = /[-\\\\\\/!@#$%\\^&\\*\\(\\)\\+\\=\\[\\]]+/g;\nvar sanitizeRegexes = {\n  'de-AT': allsymbols,\n  'de-DE': /[\\/\\\\]/g,\n  'fr-BE': allsymbols\n}; // sanitizeRegexes locale aliases\n\nsanitizeRegexes['nl-BE'] = sanitizeRegexes['fr-BE'];\n/*\n * Validator function\n * Return true if the passed string is a valid tax identification number\n * for the specified locale.\n * Throw an error exception if the locale is not supported.\n */\n\nfunction isTaxID(str) {\n  var locale = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'en-US';\n  (0, _assertString.default)(str); // Copy TIN to avoid replacement if sanitized\n\n  var strcopy = str.slice(0);\n\n  if (locale in taxIdFormat) {\n    if (locale in sanitizeRegexes) {\n      strcopy = strcopy.replace(sanitizeRegexes[locale], '');\n    }\n\n    if (!taxIdFormat[locale].test(strcopy)) {\n      return false;\n    }\n\n    if (locale in taxIdCheck) {\n      return taxIdCheck[locale](strcopy);\n    } // Fallthrough; not all locales have algorithmic checks\n\n\n    return true;\n  }\n\n  throw new Error(\"Invalid locale '\".concat(locale, \"'\"));\n}\n\nmodule.exports = exports.default;\nmodule.exports.default = exports.default;","map":{"version":3,"sources":["H:/Programming Repositories/Titans/Web/UpSkill.Web/ClientApp/node_modules/validator/lib/isTaxID.js"],"names":["_typeof","obj","Symbol","iterator","constructor","prototype","Object","defineProperty","exports","value","default","isTaxID","_assertString","_interopRequireDefault","require","algorithms","_interopRequireWildcard","_isDate","_getRequireWildcardCache","WeakMap","cache","__esModule","has","get","newObj","hasPropertyDescriptor","getOwnPropertyDescriptor","key","hasOwnProperty","call","desc","set","_toConsumableArray","arr","_arrayWithoutHoles","_iterableToArray","_unsupportedIterableToArray","_nonIterableSpread","TypeError","o","minLen","_arrayLikeToArray","n","toString","slice","name","Array","from","test","iter","isArray","len","length","i","arr2","bgBgCheck","tin","century_year","month","parseInt","concat","date","digits","split","map","a","multip_lookup","checksum","csCzCheck","replace","full_year","join","checkdigit","deAtCheck","luhnCheck","deDeCheck","occurences","push","j","filter","trip_locations","recurrent","_i","iso7064Check","dkDkCheck","year","century_digit","weight","elCyCheck","_i2","String","fromCharCode","charAt","elGrCheck","Math","pow","enIeCheck","reverseMultiplyAndSum","charCodeAt","toUpperCase","enUsCampusPrefix","andover","atlanta","austin","brookhaven","cincinnati","fresno","internet","kansas","memphis","ogden","philadelphia","sba","enUsGetPrefixes","prefixes","location","apply","enUsCheck","indexOf","substr","esEsCheck","chars","isNaN","lead_replace","splice","unshift","lookup","etEeCheck","_i3","fiFiCheck","century_symbol","letters_lookup","frBeCheck","checkdigits","frFrCheck","frLuCheck","verhoeffCheck","hrHrCheck","huHuCheck","itItNameCheck","vowelflag","xflag","itItCheck","number_locations","number_replace","L","M","N","P","Q","R","S","T","U","V","_i4","_number_locations","month_replace","A","B","C","D","E","H","day","_i5","char_to_int","odd_convert","F","G","I","J","K","O","W","X","Y","Z","_i6","_char_to_int","multiplier","lvLvCheck","mtMtCheck","first_part","second_part","nlNlCheck","plPlCheck","_checksum","_i7","ptBrCheck","_sum","ramainder","substring","_i8","identifiers","verificators","sum","pos","_i9","result","_i10","ptPtCheck","roRoCheck","multipliers","skSkCheck","slSiCheck","svSeCheck","tin_copy","current_year","Date","getFullYear","current_century","taxIdFormat","taxIdCheck","allsymbols","sanitizeRegexes","str","locale","arguments","undefined","strcopy","Error","module"],"mappings":"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","sourcesContent":["\"use strict\";\n\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = isTaxID;\n\nvar _assertString = _interopRequireDefault(require(\"./util/assertString\"));\n\nvar algorithms = _interopRequireWildcard(require(\"./util/algorithms\"));\n\nvar _isDate = _interopRequireDefault(require(\"./isDate\"));\n\nfunction _getRequireWildcardCache() { if (typeof WeakMap !== \"function\") return null; var cache = new WeakMap(); _getRequireWildcardCache = function _getRequireWildcardCache() { return cache; }; return cache; }\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } if (obj === null || _typeof(obj) !== \"object\" && typeof obj !== \"function\") { return { default: obj }; } var cache = _getRequireWildcardCache(); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread(); }\n\nfunction _nonIterableSpread() { throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _iterableToArray(iter) { if (typeof Symbol !== \"undefined\" && Symbol.iterator in Object(iter)) return Array.from(iter); }\n\nfunction _arrayWithoutHoles(arr) { if (Array.isArray(arr)) return _arrayLikeToArray(arr); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\n/**\n * TIN Validation\n * Validates Tax Identification Numbers (TINs) from the US, EU member states and the United Kingdom.\n *\n * EU-UK:\n * National TIN validity is calculated using public algorithms as made available by DG TAXUD.\n *\n * See `https://ec.europa.eu/taxation_customs/tin/specs/FS-TIN%20Algorithms-Public.docx` for more information.\n *\n * US:\n * An Employer Identification Number (EIN), also known as a Federal Tax Identification Number,\n *  is used to identify a business entity.\n *\n * NOTES:\n *  - Prefix 47 is being reserved for future use\n *  - Prefixes 26, 27, 45, 46 and 47 were previously assigned by the Philadelphia campus.\n *\n * See `http://www.irs.gov/Businesses/Small-Businesses-&-Self-Employed/How-EINs-are-Assigned-and-Valid-EIN-Prefixes`\n * for more information.\n */\n// Locale functions\n\n/*\n * bg-BG validation function\n * (Edinen graždanski nomer (EGN/ЕГН), persons only)\n * Checks if birth date (first six digits) is valid and calculates check (last) digit\n */\nfunction bgBgCheck(tin) {\n  // Extract full year, normalize month and check birth date validity\n  var century_year = tin.slice(0, 2);\n  var month = parseInt(tin.slice(2, 4), 10);\n\n  if (month > 40) {\n    month -= 40;\n    century_year = \"20\".concat(century_year);\n  } else if (month > 20) {\n    month -= 20;\n    century_year = \"18\".concat(century_year);\n  } else {\n    century_year = \"19\".concat(century_year);\n  }\n\n  if (month < 10) {\n    month = \"0\".concat(month);\n  }\n\n  var date = \"\".concat(century_year, \"/\").concat(month, \"/\").concat(tin.slice(4, 6));\n\n  if (!(0, _isDate.default)(date, 'YYYY/MM/DD')) {\n    return false;\n  } // split digits into an array for further processing\n\n\n  var digits = tin.split('').map(function (a) {\n    return parseInt(a, 10);\n  }); // Calculate checksum by multiplying digits with fixed values\n\n  var multip_lookup = [2, 4, 8, 5, 10, 9, 7, 3, 6];\n  var checksum = 0;\n\n  for (var i = 0; i < multip_lookup.length; i++) {\n    checksum += digits[i] * multip_lookup[i];\n  }\n\n  checksum = checksum % 11 === 10 ? 0 : checksum % 11;\n  return checksum === digits[9];\n}\n/*\n * cs-CZ validation function\n * (Rodné číslo (RČ), persons only)\n * Checks if birth date (first six digits) is valid and divisibility by 11\n * Material not in DG TAXUD document sourced from:\n * -`https://lorenc.info/3MA381/overeni-spravnosti-rodneho-cisla.htm`\n * -`https://www.mvcr.cz/clanek/rady-a-sluzby-dokumenty-rodne-cislo.aspx`\n */\n\n\nfunction csCzCheck(tin) {\n  tin = tin.replace(/\\W/, ''); // Extract full year from TIN length\n\n  var full_year = parseInt(tin.slice(0, 2), 10);\n\n  if (tin.length === 10) {\n    if (full_year < 54) {\n      full_year = \"20\".concat(full_year);\n    } else {\n      full_year = \"19\".concat(full_year);\n    }\n  } else {\n    if (tin.slice(6) === '000') {\n      return false;\n    } // Three-zero serial not assigned before 1954\n\n\n    if (full_year < 54) {\n      full_year = \"19\".concat(full_year);\n    } else {\n      return false; // No 18XX years seen in any of the resources\n    }\n  } // Add missing zero if needed\n\n\n  if (full_year.length === 3) {\n    full_year = [full_year.slice(0, 2), '0', full_year.slice(2)].join('');\n  } // Extract month from TIN and normalize\n\n\n  var month = parseInt(tin.slice(2, 4), 10);\n\n  if (month > 50) {\n    month -= 50;\n  }\n\n  if (month > 20) {\n    // Month-plus-twenty was only introduced in 2004\n    if (parseInt(full_year, 10) < 2004) {\n      return false;\n    }\n\n    month -= 20;\n  }\n\n  if (month < 10) {\n    month = \"0\".concat(month);\n  } // Check date validity\n\n\n  var date = \"\".concat(full_year, \"/\").concat(month, \"/\").concat(tin.slice(4, 6));\n\n  if (!(0, _isDate.default)(date, 'YYYY/MM/DD')) {\n    return false;\n  } // Verify divisibility by 11\n\n\n  if (tin.length === 10) {\n    if (parseInt(tin, 10) % 11 !== 0) {\n      // Some numbers up to and including 1985 are still valid if\n      // check (last) digit equals 0 and modulo of first 9 digits equals 10\n      var checkdigit = parseInt(tin.slice(0, 9), 10) % 11;\n\n      if (parseInt(full_year, 10) < 1986 && checkdigit === 10) {\n        if (parseInt(tin.slice(9), 10) !== 0) {\n          return false;\n        }\n      } else {\n        return false;\n      }\n    }\n  }\n\n  return true;\n}\n/*\n * de-AT validation function\n * (Abgabenkontonummer, persons/entities)\n * Verify TIN validity by calling luhnCheck()\n */\n\n\nfunction deAtCheck(tin) {\n  return algorithms.luhnCheck(tin);\n}\n/*\n * de-DE validation function\n * (Steueridentifikationsnummer (Steuer-IdNr.), persons only)\n * Tests for single duplicate/triplicate value, then calculates ISO 7064 check (last) digit\n * Partial implementation of spec (same result with both algorithms always)\n */\n\n\nfunction deDeCheck(tin) {\n  // Split digits into an array for further processing\n  var digits = tin.split('').map(function (a) {\n    return parseInt(a, 10);\n  }); // Fill array with strings of number positions\n\n  var occurences = [];\n\n  for (var i = 0; i < digits.length - 1; i++) {\n    occurences.push('');\n\n    for (var j = 0; j < digits.length - 1; j++) {\n      if (digits[i] === digits[j]) {\n        occurences[i] += j;\n      }\n    }\n  } // Remove digits with one occurence and test for only one duplicate/triplicate\n\n\n  occurences = occurences.filter(function (a) {\n    return a.length > 1;\n  });\n\n  if (occurences.length !== 2 && occurences.length !== 3) {\n    return false;\n  } // In case of triplicate value only two digits are allowed next to each other\n\n\n  if (occurences[0].length === 3) {\n    var trip_locations = occurences[0].split('').map(function (a) {\n      return parseInt(a, 10);\n    });\n    var recurrent = 0; // Amount of neighbour occurences\n\n    for (var _i = 0; _i < trip_locations.length - 1; _i++) {\n      if (trip_locations[_i] + 1 === trip_locations[_i + 1]) {\n        recurrent += 1;\n      }\n    }\n\n    if (recurrent === 2) {\n      return false;\n    }\n  }\n\n  return algorithms.iso7064Check(tin);\n}\n/*\n * dk-DK validation function\n * (CPR-nummer (personnummer), persons only)\n * Checks if birth date (first six digits) is valid and assigned to century (seventh) digit,\n * and calculates check (last) digit\n */\n\n\nfunction dkDkCheck(tin) {\n  tin = tin.replace(/\\W/, ''); // Extract year, check if valid for given century digit and add century\n\n  var year = parseInt(tin.slice(4, 6), 10);\n  var century_digit = tin.slice(6, 7);\n\n  switch (century_digit) {\n    case '0':\n    case '1':\n    case '2':\n    case '3':\n      year = \"19\".concat(year);\n      break;\n\n    case '4':\n    case '9':\n      if (year < 37) {\n        year = \"20\".concat(year);\n      } else {\n        year = \"19\".concat(year);\n      }\n\n      break;\n\n    default:\n      if (year < 37) {\n        year = \"20\".concat(year);\n      } else if (year > 58) {\n        year = \"18\".concat(year);\n      } else {\n        return false;\n      }\n\n      break;\n  } // Add missing zero if needed\n\n\n  if (year.length === 3) {\n    year = [year.slice(0, 2), '0', year.slice(2)].join('');\n  } // Check date validity\n\n\n  var date = \"\".concat(year, \"/\").concat(tin.slice(2, 4), \"/\").concat(tin.slice(0, 2));\n\n  if (!(0, _isDate.default)(date, 'YYYY/MM/DD')) {\n    return false;\n  } // Split digits into an array for further processing\n\n\n  var digits = tin.split('').map(function (a) {\n    return parseInt(a, 10);\n  });\n  var checksum = 0;\n  var weight = 4; // Multiply by weight and add to checksum\n\n  for (var i = 0; i < 9; i++) {\n    checksum += digits[i] * weight;\n    weight -= 1;\n\n    if (weight === 1) {\n      weight = 7;\n    }\n  }\n\n  checksum %= 11;\n\n  if (checksum === 1) {\n    return false;\n  }\n\n  return checksum === 0 ? digits[9] === 0 : digits[9] === 11 - checksum;\n}\n/*\n * el-CY validation function\n * (Arithmos Forologikou Mitroou (AFM/ΑΦΜ), persons only)\n * Verify TIN validity by calculating ASCII value of check (last) character\n */\n\n\nfunction elCyCheck(tin) {\n  // split digits into an array for further processing\n  var digits = tin.slice(0, 8).split('').map(function (a) {\n    return parseInt(a, 10);\n  });\n  var checksum = 0; // add digits in even places\n\n  for (var i = 1; i < digits.length; i += 2) {\n    checksum += digits[i];\n  } // add digits in odd places\n\n\n  for (var _i2 = 0; _i2 < digits.length; _i2 += 2) {\n    if (digits[_i2] < 2) {\n      checksum += 1 - digits[_i2];\n    } else {\n      checksum += 2 * (digits[_i2] - 2) + 5;\n\n      if (digits[_i2] > 4) {\n        checksum += 2;\n      }\n    }\n  }\n\n  return String.fromCharCode(checksum % 26 + 65) === tin.charAt(8);\n}\n/*\n * el-GR validation function\n * (Arithmos Forologikou Mitroou (AFM/ΑΦΜ), persons/entities)\n * Verify TIN validity by calculating check (last) digit\n * Algorithm not in DG TAXUD document- sourced from:\n * - `http://epixeirisi.gr/%CE%9A%CE%A1%CE%99%CE%A3%CE%99%CE%9C%CE%91-%CE%98%CE%95%CE%9C%CE%91%CE%A4%CE%91-%CE%A6%CE%9F%CE%A1%CE%9F%CE%9B%CE%9F%CE%93%CE%99%CE%91%CE%A3-%CE%9A%CE%91%CE%99-%CE%9B%CE%9F%CE%93%CE%99%CE%A3%CE%A4%CE%99%CE%9A%CE%97%CE%A3/23791/%CE%91%CF%81%CE%B9%CE%B8%CE%BC%CF%8C%CF%82-%CE%A6%CE%BF%CF%81%CE%BF%CE%BB%CE%BF%CE%B3%CE%B9%CE%BA%CE%BF%CF%8D-%CE%9C%CE%B7%CF%84%CF%81%CF%8E%CE%BF%CF%85`\n */\n\n\nfunction elGrCheck(tin) {\n  // split digits into an array for further processing\n  var digits = tin.split('').map(function (a) {\n    return parseInt(a, 10);\n  });\n  var checksum = 0;\n\n  for (var i = 0; i < 8; i++) {\n    checksum += digits[i] * Math.pow(2, 8 - i);\n  }\n\n  return checksum % 11 % 10 === digits[8];\n}\n/*\n * en-GB validation function (should go here if needed)\n * (National Insurance Number (NINO) or Unique Taxpayer Reference (UTR),\n * persons/entities respectively)\n */\n\n/*\n * en-IE validation function\n * (Personal Public Service Number (PPS No), persons only)\n * Verify TIN validity by calculating check (second to last) character\n */\n\n\nfunction enIeCheck(tin) {\n  var checksum = algorithms.reverseMultiplyAndSum(tin.split('').slice(0, 7).map(function (a) {\n    return parseInt(a, 10);\n  }), 8);\n\n  if (tin.length === 9 && tin[8] !== 'W') {\n    checksum += (tin[8].charCodeAt(0) - 64) * 9;\n  }\n\n  checksum %= 23;\n\n  if (checksum === 0) {\n    return tin[7].toUpperCase() === 'W';\n  }\n\n  return tin[7].toUpperCase() === String.fromCharCode(64 + checksum);\n} // Valid US IRS campus prefixes\n\n\nvar enUsCampusPrefix = {\n  andover: ['10', '12'],\n  atlanta: ['60', '67'],\n  austin: ['50', '53'],\n  brookhaven: ['01', '02', '03', '04', '05', '06', '11', '13', '14', '16', '21', '22', '23', '25', '34', '51', '52', '54', '55', '56', '57', '58', '59', '65'],\n  cincinnati: ['30', '32', '35', '36', '37', '38', '61'],\n  fresno: ['15', '24'],\n  internet: ['20', '26', '27', '45', '46', '47'],\n  kansas: ['40', '44'],\n  memphis: ['94', '95'],\n  ogden: ['80', '90'],\n  philadelphia: ['33', '39', '41', '42', '43', '46', '48', '62', '63', '64', '66', '68', '71', '72', '73', '74', '75', '76', '77', '81', '82', '83', '84', '85', '86', '87', '88', '91', '92', '93', '98', '99'],\n  sba: ['31']\n}; // Return an array of all US IRS campus prefixes\n\nfunction enUsGetPrefixes() {\n  var prefixes = [];\n\n  for (var location in enUsCampusPrefix) {\n    // https://github.com/gotwarlost/istanbul/blob/master/ignoring-code-for-coverage.md#ignoring-code-for-coverage-purposes\n    // istanbul ignore else\n    if (enUsCampusPrefix.hasOwnProperty(location)) {\n      prefixes.push.apply(prefixes, _toConsumableArray(enUsCampusPrefix[location]));\n    }\n  }\n\n  return prefixes;\n}\n/*\n * en-US validation function\n * Verify that the TIN starts with a valid IRS campus prefix\n */\n\n\nfunction enUsCheck(tin) {\n  return enUsGetPrefixes().indexOf(tin.substr(0, 2)) !== -1;\n}\n/*\n * es-ES validation function\n * (Documento Nacional de Identidad (DNI)\n * or Número de Identificación de Extranjero (NIE), persons only)\n * Verify TIN validity by calculating check (last) character\n */\n\n\nfunction esEsCheck(tin) {\n  // Split characters into an array for further processing\n  var chars = tin.toUpperCase().split(''); // Replace initial letter if needed\n\n  if (isNaN(parseInt(chars[0], 10)) && chars.length > 1) {\n    var lead_replace = 0;\n\n    switch (chars[0]) {\n      case 'Y':\n        lead_replace = 1;\n        break;\n\n      case 'Z':\n        lead_replace = 2;\n        break;\n\n      default:\n    }\n\n    chars.splice(0, 1, lead_replace); // Fill with zeros if smaller than proper\n  } else {\n    while (chars.length < 9) {\n      chars.unshift(0);\n    }\n  } // Calculate checksum and check according to lookup\n\n\n  var lookup = ['T', 'R', 'W', 'A', 'G', 'M', 'Y', 'F', 'P', 'D', 'X', 'B', 'N', 'J', 'Z', 'S', 'Q', 'V', 'H', 'L', 'C', 'K', 'E'];\n  chars = chars.join('');\n  var checksum = parseInt(chars.slice(0, 8), 10) % 23;\n  return chars[8] === lookup[checksum];\n}\n/*\n * et-EE validation function\n * (Isikukood (IK), persons only)\n * Checks if birth date (century digit and six following) is valid and calculates check (last) digit\n * Material not in DG TAXUD document sourced from:\n * - `https://www.oecd.org/tax/automatic-exchange/crs-implementation-and-assistance/tax-identification-numbers/Estonia-TIN.pdf`\n */\n\n\nfunction etEeCheck(tin) {\n  // Extract year and add century\n  var full_year = tin.slice(1, 3);\n  var century_digit = tin.slice(0, 1);\n\n  switch (century_digit) {\n    case '1':\n    case '2':\n      full_year = \"18\".concat(full_year);\n      break;\n\n    case '3':\n    case '4':\n      full_year = \"19\".concat(full_year);\n      break;\n\n    default:\n      full_year = \"20\".concat(full_year);\n      break;\n  } // Check date validity\n\n\n  var date = \"\".concat(full_year, \"/\").concat(tin.slice(3, 5), \"/\").concat(tin.slice(5, 7));\n\n  if (!(0, _isDate.default)(date, 'YYYY/MM/DD')) {\n    return false;\n  } // Split digits into an array for further processing\n\n\n  var digits = tin.split('').map(function (a) {\n    return parseInt(a, 10);\n  });\n  var checksum = 0;\n  var weight = 1; // Multiply by weight and add to checksum\n\n  for (var i = 0; i < 10; i++) {\n    checksum += digits[i] * weight;\n    weight += 1;\n\n    if (weight === 10) {\n      weight = 1;\n    }\n  } // Do again if modulo 11 of checksum is 10\n\n\n  if (checksum % 11 === 10) {\n    checksum = 0;\n    weight = 3;\n\n    for (var _i3 = 0; _i3 < 10; _i3++) {\n      checksum += digits[_i3] * weight;\n      weight += 1;\n\n      if (weight === 10) {\n        weight = 1;\n      }\n    }\n\n    if (checksum % 11 === 10) {\n      return digits[10] === 0;\n    }\n  }\n\n  return checksum % 11 === digits[10];\n}\n/*\n * fi-FI validation function\n * (Henkilötunnus (HETU), persons only)\n * Checks if birth date (first six digits plus century symbol) is valid\n * and calculates check (last) digit\n */\n\n\nfunction fiFiCheck(tin) {\n  // Extract year and add century\n  var full_year = tin.slice(4, 6);\n  var century_symbol = tin.slice(6, 7);\n\n  switch (century_symbol) {\n    case '+':\n      full_year = \"18\".concat(full_year);\n      break;\n\n    case '-':\n      full_year = \"19\".concat(full_year);\n      break;\n\n    default:\n      full_year = \"20\".concat(full_year);\n      break;\n  } // Check date validity\n\n\n  var date = \"\".concat(full_year, \"/\").concat(tin.slice(2, 4), \"/\").concat(tin.slice(0, 2));\n\n  if (!(0, _isDate.default)(date, 'YYYY/MM/DD')) {\n    return false;\n  } // Calculate check character\n\n\n  var checksum = parseInt(tin.slice(0, 6) + tin.slice(7, 10), 10) % 31;\n\n  if (checksum < 10) {\n    return checksum === parseInt(tin.slice(10), 10);\n  }\n\n  checksum -= 10;\n  var letters_lookup = ['A', 'B', 'C', 'D', 'E', 'F', 'H', 'J', 'K', 'L', 'M', 'N', 'P', 'R', 'S', 'T', 'U', 'V', 'W', 'X', 'Y'];\n  return letters_lookup[checksum] === tin.slice(10);\n}\n/*\n * fr/nl-BE validation function\n * (Numéro national (N.N.), persons only)\n * Checks if birth date (first six digits) is valid and calculates check (last two) digits\n */\n\n\nfunction frBeCheck(tin) {\n  // Zero month/day value is acceptable\n  if (tin.slice(2, 4) !== '00' || tin.slice(4, 6) !== '00') {\n    // Extract date from first six digits of TIN\n    var date = \"\".concat(tin.slice(0, 2), \"/\").concat(tin.slice(2, 4), \"/\").concat(tin.slice(4, 6));\n\n    if (!(0, _isDate.default)(date, 'YY/MM/DD')) {\n      return false;\n    }\n  }\n\n  var checksum = 97 - parseInt(tin.slice(0, 9), 10) % 97;\n  var checkdigits = parseInt(tin.slice(9, 11), 10);\n\n  if (checksum !== checkdigits) {\n    checksum = 97 - parseInt(\"2\".concat(tin.slice(0, 9)), 10) % 97;\n\n    if (checksum !== checkdigits) {\n      return false;\n    }\n  }\n\n  return true;\n}\n/*\n * fr-FR validation function\n * (Numéro fiscal de référence (numéro SPI), persons only)\n * Verify TIN validity by calculating check (last three) digits\n */\n\n\nfunction frFrCheck(tin) {\n  tin = tin.replace(/\\s/g, '');\n  var checksum = parseInt(tin.slice(0, 10), 10) % 511;\n  var checkdigits = parseInt(tin.slice(10, 13), 10);\n  return checksum === checkdigits;\n}\n/*\n * fr/lb-LU validation function\n * (numéro d’identification personnelle, persons only)\n * Verify birth date validity and run Luhn and Verhoeff checks\n */\n\n\nfunction frLuCheck(tin) {\n  // Extract date and check validity\n  var date = \"\".concat(tin.slice(0, 4), \"/\").concat(tin.slice(4, 6), \"/\").concat(tin.slice(6, 8));\n\n  if (!(0, _isDate.default)(date, 'YYYY/MM/DD')) {\n    return false;\n  } // Run Luhn check\n\n\n  if (!algorithms.luhnCheck(tin.slice(0, 12))) {\n    return false;\n  } // Remove Luhn check digit and run Verhoeff check\n\n\n  return algorithms.verhoeffCheck(\"\".concat(tin.slice(0, 11)).concat(tin[12]));\n}\n/*\n * hr-HR validation function\n * (Osobni identifikacijski broj (OIB), persons/entities)\n * Verify TIN validity by calling iso7064Check(digits)\n */\n\n\nfunction hrHrCheck(tin) {\n  return algorithms.iso7064Check(tin);\n}\n/*\n * hu-HU validation function\n * (Adóazonosító jel, persons only)\n * Verify TIN validity by calculating check (last) digit\n */\n\n\nfunction huHuCheck(tin) {\n  // split digits into an array for further processing\n  var digits = tin.split('').map(function (a) {\n    return parseInt(a, 10);\n  });\n  var checksum = 8;\n\n  for (var i = 1; i < 9; i++) {\n    checksum += digits[i] * (i + 1);\n  }\n\n  return checksum % 11 === digits[9];\n}\n/*\n * lt-LT validation function (should go here if needed)\n * (Asmens kodas, persons/entities respectively)\n * Current validation check is alias of etEeCheck- same format applies\n */\n\n/*\n * it-IT first/last name validity check\n * Accepts it-IT TIN-encoded names as a three-element character array and checks their validity\n * Due to lack of clarity between resources (\"Are only Italian consonants used?\n * What happens if a person has X in their name?\" etc.) only two test conditions\n * have been implemented:\n * Vowels may only be followed by other vowels or an X character\n * and X characters after vowels may only be followed by other X characters.\n */\n\n\nfunction itItNameCheck(name) {\n  // true at the first occurence of a vowel\n  var vowelflag = false; // true at the first occurence of an X AFTER vowel\n  // (to properly handle last names with X as consonant)\n\n  var xflag = false;\n\n  for (var i = 0; i < 3; i++) {\n    if (!vowelflag && /[AEIOU]/.test(name[i])) {\n      vowelflag = true;\n    } else if (!xflag && vowelflag && name[i] === 'X') {\n      xflag = true;\n    } else if (i > 0) {\n      if (vowelflag && !xflag) {\n        if (!/[AEIOU]/.test(name[i])) {\n          return false;\n        }\n      }\n\n      if (xflag) {\n        if (!/X/.test(name[i])) {\n          return false;\n        }\n      }\n    }\n  }\n\n  return true;\n}\n/*\n * it-IT validation function\n * (Codice fiscale (TIN-IT), persons only)\n * Verify name, birth date and codice catastale validity\n * and calculate check character.\n * Material not in DG-TAXUD document sourced from:\n * `https://en.wikipedia.org/wiki/Italian_fiscal_code`\n */\n\n\nfunction itItCheck(tin) {\n  // Capitalize and split characters into an array for further processing\n  var chars = tin.toUpperCase().split(''); // Check first and last name validity calling itItNameCheck()\n\n  if (!itItNameCheck(chars.slice(0, 3))) {\n    return false;\n  }\n\n  if (!itItNameCheck(chars.slice(3, 6))) {\n    return false;\n  } // Convert letters in number spaces back to numbers if any\n\n\n  var number_locations = [6, 7, 9, 10, 12, 13, 14];\n  var number_replace = {\n    L: '0',\n    M: '1',\n    N: '2',\n    P: '3',\n    Q: '4',\n    R: '5',\n    S: '6',\n    T: '7',\n    U: '8',\n    V: '9'\n  };\n\n  for (var _i4 = 0, _number_locations = number_locations; _i4 < _number_locations.length; _i4++) {\n    var i = _number_locations[_i4];\n\n    if (chars[i] in number_replace) {\n      chars.splice(i, 1, number_replace[chars[i]]);\n    }\n  } // Extract month and day, and check date validity\n\n\n  var month_replace = {\n    A: '01',\n    B: '02',\n    C: '03',\n    D: '04',\n    E: '05',\n    H: '06',\n    L: '07',\n    M: '08',\n    P: '09',\n    R: '10',\n    S: '11',\n    T: '12'\n  };\n  var month = month_replace[chars[8]];\n  var day = parseInt(chars[9] + chars[10], 10);\n\n  if (day > 40) {\n    day -= 40;\n  }\n\n  if (day < 10) {\n    day = \"0\".concat(day);\n  }\n\n  var date = \"\".concat(chars[6]).concat(chars[7], \"/\").concat(month, \"/\").concat(day);\n\n  if (!(0, _isDate.default)(date, 'YY/MM/DD')) {\n    return false;\n  } // Calculate check character by adding up even and odd characters as numbers\n\n\n  var checksum = 0;\n\n  for (var _i5 = 1; _i5 < chars.length - 1; _i5 += 2) {\n    var char_to_int = parseInt(chars[_i5], 10);\n\n    if (isNaN(char_to_int)) {\n      char_to_int = chars[_i5].charCodeAt(0) - 65;\n    }\n\n    checksum += char_to_int;\n  }\n\n  var odd_convert = {\n    // Maps of characters at odd places\n    A: 1,\n    B: 0,\n    C: 5,\n    D: 7,\n    E: 9,\n    F: 13,\n    G: 15,\n    H: 17,\n    I: 19,\n    J: 21,\n    K: 2,\n    L: 4,\n    M: 18,\n    N: 20,\n    O: 11,\n    P: 3,\n    Q: 6,\n    R: 8,\n    S: 12,\n    T: 14,\n    U: 16,\n    V: 10,\n    W: 22,\n    X: 25,\n    Y: 24,\n    Z: 23,\n    0: 1,\n    1: 0\n  };\n\n  for (var _i6 = 0; _i6 < chars.length - 1; _i6 += 2) {\n    var _char_to_int = 0;\n\n    if (chars[_i6] in odd_convert) {\n      _char_to_int = odd_convert[chars[_i6]];\n    } else {\n      var multiplier = parseInt(chars[_i6], 10);\n      _char_to_int = 2 * multiplier + 1;\n\n      if (multiplier > 4) {\n        _char_to_int += 2;\n      }\n    }\n\n    checksum += _char_to_int;\n  }\n\n  if (String.fromCharCode(65 + checksum % 26) !== chars[15]) {\n    return false;\n  }\n\n  return true;\n}\n/*\n * lv-LV validation function\n * (Personas kods (PK), persons only)\n * Check validity of birth date and calculate check (last) digit\n * Support only for old format numbers (not starting with '32', issued before 2017/07/01)\n * Material not in DG TAXUD document sourced from:\n * `https://boot.ritakafija.lv/forums/index.php?/topic/88314-personas-koda-algoritms-%C4%8Deksumma/`\n */\n\n\nfunction lvLvCheck(tin) {\n  tin = tin.replace(/\\W/, ''); // Extract date from TIN\n\n  var day = tin.slice(0, 2);\n\n  if (day !== '32') {\n    // No date/checksum check if new format\n    var month = tin.slice(2, 4);\n\n    if (month !== '00') {\n      // No date check if unknown month\n      var full_year = tin.slice(4, 6);\n\n      switch (tin[6]) {\n        case '0':\n          full_year = \"18\".concat(full_year);\n          break;\n\n        case '1':\n          full_year = \"19\".concat(full_year);\n          break;\n\n        default:\n          full_year = \"20\".concat(full_year);\n          break;\n      } // Check date validity\n\n\n      var date = \"\".concat(full_year, \"/\").concat(tin.slice(2, 4), \"/\").concat(day);\n\n      if (!(0, _isDate.default)(date, 'YYYY/MM/DD')) {\n        return false;\n      }\n    } // Calculate check digit\n\n\n    var checksum = 1101;\n    var multip_lookup = [1, 6, 3, 7, 9, 10, 5, 8, 4, 2];\n\n    for (var i = 0; i < tin.length - 1; i++) {\n      checksum -= parseInt(tin[i], 10) * multip_lookup[i];\n    }\n\n    return parseInt(tin[10], 10) === checksum % 11;\n  }\n\n  return true;\n}\n/*\n * mt-MT validation function\n * (Identity Card Number or Unique Taxpayer Reference, persons/entities)\n * Verify Identity Card Number structure (no other tests found)\n */\n\n\nfunction mtMtCheck(tin) {\n  if (tin.length !== 9) {\n    // No tests for UTR\n    var chars = tin.toUpperCase().split(''); // Fill with zeros if smaller than proper\n\n    while (chars.length < 8) {\n      chars.unshift(0);\n    } // Validate format according to last character\n\n\n    switch (tin[7]) {\n      case 'A':\n      case 'P':\n        if (parseInt(chars[6], 10) === 0) {\n          return false;\n        }\n\n        break;\n\n      default:\n        {\n          var first_part = parseInt(chars.join('').slice(0, 5), 10);\n\n          if (first_part > 32000) {\n            return false;\n          }\n\n          var second_part = parseInt(chars.join('').slice(5, 7), 10);\n\n          if (first_part === second_part) {\n            return false;\n          }\n        }\n    }\n  }\n\n  return true;\n}\n/*\n * nl-NL validation function\n * (Burgerservicenummer (BSN) or Rechtspersonen Samenwerkingsverbanden Informatie Nummer (RSIN),\n * persons/entities respectively)\n * Verify TIN validity by calculating check (last) digit (variant of MOD 11)\n */\n\n\nfunction nlNlCheck(tin) {\n  return algorithms.reverseMultiplyAndSum(tin.split('').slice(0, 8).map(function (a) {\n    return parseInt(a, 10);\n  }), 9) % 11 === parseInt(tin[8], 10);\n}\n/*\n * pl-PL validation function\n * (Powszechny Elektroniczny System Ewidencji Ludności (PESEL)\n * or Numer identyfikacji podatkowej (NIP), persons/entities)\n * Verify TIN validity by validating birth date (PESEL) and calculating check (last) digit\n */\n\n\nfunction plPlCheck(tin) {\n  // NIP\n  if (tin.length === 10) {\n    // Calculate last digit by multiplying with lookup\n    var lookup = [6, 5, 7, 2, 3, 4, 5, 6, 7];\n    var _checksum = 0;\n\n    for (var i = 0; i < lookup.length; i++) {\n      _checksum += parseInt(tin[i], 10) * lookup[i];\n    }\n\n    _checksum %= 11;\n\n    if (_checksum === 10) {\n      return false;\n    }\n\n    return _checksum === parseInt(tin[9], 10);\n  } // PESEL\n  // Extract full year using month\n\n\n  var full_year = tin.slice(0, 2);\n  var month = parseInt(tin.slice(2, 4), 10);\n\n  if (month > 80) {\n    full_year = \"18\".concat(full_year);\n    month -= 80;\n  } else if (month > 60) {\n    full_year = \"22\".concat(full_year);\n    month -= 60;\n  } else if (month > 40) {\n    full_year = \"21\".concat(full_year);\n    month -= 40;\n  } else if (month > 20) {\n    full_year = \"20\".concat(full_year);\n    month -= 20;\n  } else {\n    full_year = \"19\".concat(full_year);\n  } // Add leading zero to month if needed\n\n\n  if (month < 10) {\n    month = \"0\".concat(month);\n  } // Check date validity\n\n\n  var date = \"\".concat(full_year, \"/\").concat(month, \"/\").concat(tin.slice(4, 6));\n\n  if (!(0, _isDate.default)(date, 'YYYY/MM/DD')) {\n    return false;\n  } // Calculate last digit by mulitplying with odd one-digit numbers except 5\n\n\n  var checksum = 0;\n  var multiplier = 1;\n\n  for (var _i7 = 0; _i7 < tin.length - 1; _i7++) {\n    checksum += parseInt(tin[_i7], 10) * multiplier % 10;\n    multiplier += 2;\n\n    if (multiplier > 10) {\n      multiplier = 1;\n    } else if (multiplier === 5) {\n      multiplier += 2;\n    }\n  }\n\n  checksum = 10 - checksum % 10;\n  return checksum === parseInt(tin[10], 10);\n}\n/*\n* pt-BR validation function\n* (Cadastro de Pessoas Físicas (CPF, persons)\n* Cadastro Nacional de Pessoas Jurídicas (CNPJ, entities)\n* Both inputs will be validated\n*/\n\n\nfunction ptBrCheck(tin) {\n  tin = tin.replace(/[^\\d]+/g, '');\n  if (tin === '') return false;\n\n  if (tin.length === 11) {\n    var _sum;\n\n    var ramainder;\n    _sum = 0;\n    tin = tin.replace(/[^\\d]+/g, '');\n    if ( // Reject known invalid CPFs\n    tin === '11111111111' || tin === '22222222222' || tin === '33333333333' || tin === '44444444444' || tin === '55555555555' || tin === '66666666666' || tin === '77777777777' || tin === '88888888888' || tin === '99999999999' || tin === '00000000000') return false;\n\n    for (var i = 1; i <= 9; i++) {\n      _sum += parseInt(tin.substring(i - 1, i), 10) * (11 - i);\n    }\n\n    ramainder = _sum * 10 % 11;\n    if (ramainder === 10 || ramainder === 11) ramainder = 0;\n    if (ramainder !== parseInt(tin.substring(9, 10), 10)) return false;\n    _sum = 0;\n\n    for (var _i8 = 1; _i8 <= 10; _i8++) {\n      _sum += parseInt(tin.substring(_i8 - 1, _i8), 10) * (12 - _i8);\n    }\n\n    ramainder = _sum * 10 % 11;\n    if (ramainder === 10 || ramainder === 11) ramainder = 0;\n    if (ramainder !== parseInt(tin.substring(10, 11), 10)) return false;\n    return true;\n  }\n\n  if (tin.length !== 14) {\n    return false;\n  }\n\n  if ( // Reject know invalid CNPJs\n  tin === '00000000000000' || tin === '11111111111111' || tin === '22222222222222' || tin === '33333333333333' || tin === '44444444444444' || tin === '55555555555555' || tin === '66666666666666' || tin === '77777777777777' || tin === '88888888888888' || tin === '99999999999999') {\n    return false;\n  }\n\n  var length = tin.length - 2;\n  var identifiers = tin.substring(0, length);\n  var verificators = tin.substring(length);\n  var sum = 0;\n  var pos = length - 7;\n\n  for (var _i9 = length; _i9 >= 1; _i9--) {\n    sum += identifiers.charAt(length - _i9) * pos;\n    pos -= 1;\n\n    if (pos < 2) {\n      pos = 9;\n    }\n  }\n\n  var result = sum % 11 < 2 ? 0 : 11 - sum % 11;\n\n  if (result !== parseInt(verificators.charAt(0), 10)) {\n    return false;\n  }\n\n  length += 1;\n  identifiers = tin.substring(0, length);\n  sum = 0;\n  pos = length - 7;\n\n  for (var _i10 = length; _i10 >= 1; _i10--) {\n    sum += identifiers.charAt(length - _i10) * pos;\n    pos -= 1;\n\n    if (pos < 2) {\n      pos = 9;\n    }\n  }\n\n  result = sum % 11 < 2 ? 0 : 11 - sum % 11;\n\n  if (result !== parseInt(verificators.charAt(1), 10)) {\n    return false;\n  }\n\n  return true;\n}\n/*\n * pt-PT validation function\n * (Número de identificação fiscal (NIF), persons/entities)\n * Verify TIN validity by calculating check (last) digit (variant of MOD 11)\n */\n\n\nfunction ptPtCheck(tin) {\n  var checksum = 11 - algorithms.reverseMultiplyAndSum(tin.split('').slice(0, 8).map(function (a) {\n    return parseInt(a, 10);\n  }), 9) % 11;\n\n  if (checksum > 9) {\n    return parseInt(tin[8], 10) === 0;\n  }\n\n  return checksum === parseInt(tin[8], 10);\n}\n/*\n * ro-RO validation function\n * (Cod Numeric Personal (CNP) or Cod de înregistrare fiscală (CIF),\n * persons only)\n * Verify CNP validity by calculating check (last) digit (test not found for CIF)\n * Material not in DG TAXUD document sourced from:\n * `https://en.wikipedia.org/wiki/National_identification_number#Romania`\n */\n\n\nfunction roRoCheck(tin) {\n  if (tin.slice(0, 4) !== '9000') {\n    // No test found for this format\n    // Extract full year using century digit if possible\n    var full_year = tin.slice(1, 3);\n\n    switch (tin[0]) {\n      case '1':\n      case '2':\n        full_year = \"19\".concat(full_year);\n        break;\n\n      case '3':\n      case '4':\n        full_year = \"18\".concat(full_year);\n        break;\n\n      case '5':\n      case '6':\n        full_year = \"20\".concat(full_year);\n        break;\n\n      default:\n    } // Check date validity\n\n\n    var date = \"\".concat(full_year, \"/\").concat(tin.slice(3, 5), \"/\").concat(tin.slice(5, 7));\n\n    if (date.length === 8) {\n      if (!(0, _isDate.default)(date, 'YY/MM/DD')) {\n        return false;\n      }\n    } else if (!(0, _isDate.default)(date, 'YYYY/MM/DD')) {\n      return false;\n    } // Calculate check digit\n\n\n    var digits = tin.split('').map(function (a) {\n      return parseInt(a, 10);\n    });\n    var multipliers = [2, 7, 9, 1, 4, 6, 3, 5, 8, 2, 7, 9];\n    var checksum = 0;\n\n    for (var i = 0; i < multipliers.length; i++) {\n      checksum += digits[i] * multipliers[i];\n    }\n\n    if (checksum % 11 === 10) {\n      return digits[12] === 1;\n    }\n\n    return digits[12] === checksum % 11;\n  }\n\n  return true;\n}\n/*\n * sk-SK validation function\n * (Rodné číslo (RČ) or bezvýznamové identifikačné číslo (BIČ), persons only)\n * Checks validity of pre-1954 birth numbers (rodné číslo) only\n * Due to the introduction of the pseudo-random BIČ it is not possible to test\n * post-1954 birth numbers without knowing whether they are BIČ or RČ beforehand\n */\n\n\nfunction skSkCheck(tin) {\n  if (tin.length === 9) {\n    tin = tin.replace(/\\W/, '');\n\n    if (tin.slice(6) === '000') {\n      return false;\n    } // Three-zero serial not assigned before 1954\n    // Extract full year from TIN length\n\n\n    var full_year = parseInt(tin.slice(0, 2), 10);\n\n    if (full_year > 53) {\n      return false;\n    }\n\n    if (full_year < 10) {\n      full_year = \"190\".concat(full_year);\n    } else {\n      full_year = \"19\".concat(full_year);\n    } // Extract month from TIN and normalize\n\n\n    var month = parseInt(tin.slice(2, 4), 10);\n\n    if (month > 50) {\n      month -= 50;\n    }\n\n    if (month < 10) {\n      month = \"0\".concat(month);\n    } // Check date validity\n\n\n    var date = \"\".concat(full_year, \"/\").concat(month, \"/\").concat(tin.slice(4, 6));\n\n    if (!(0, _isDate.default)(date, 'YYYY/MM/DD')) {\n      return false;\n    }\n  }\n\n  return true;\n}\n/*\n * sl-SI validation function\n * (Davčna številka, persons/entities)\n * Verify TIN validity by calculating check (last) digit (variant of MOD 11)\n */\n\n\nfunction slSiCheck(tin) {\n  var checksum = 11 - algorithms.reverseMultiplyAndSum(tin.split('').slice(0, 7).map(function (a) {\n    return parseInt(a, 10);\n  }), 8) % 11;\n\n  if (checksum === 10) {\n    return parseInt(tin[7], 10) === 0;\n  }\n\n  return checksum === parseInt(tin[7], 10);\n}\n/*\n * sv-SE validation function\n * (Personnummer or samordningsnummer, persons only)\n * Checks validity of birth date and calls luhnCheck() to validate check (last) digit\n */\n\n\nfunction svSeCheck(tin) {\n  // Make copy of TIN and normalize to two-digit year form\n  var tin_copy = tin.slice(0);\n\n  if (tin.length > 11) {\n    tin_copy = tin_copy.slice(2);\n  } // Extract date of birth\n\n\n  var full_year = '';\n  var month = tin_copy.slice(2, 4);\n  var day = parseInt(tin_copy.slice(4, 6), 10);\n\n  if (tin.length > 11) {\n    full_year = tin.slice(0, 4);\n  } else {\n    full_year = tin.slice(0, 2);\n\n    if (tin.length === 11 && day < 60) {\n      // Extract full year from centenarian symbol\n      // Should work just fine until year 10000 or so\n      var current_year = new Date().getFullYear().toString();\n      var current_century = parseInt(current_year.slice(0, 2), 10);\n      current_year = parseInt(current_year, 10);\n\n      if (tin[6] === '-') {\n        if (parseInt(\"\".concat(current_century).concat(full_year), 10) > current_year) {\n          full_year = \"\".concat(current_century - 1).concat(full_year);\n        } else {\n          full_year = \"\".concat(current_century).concat(full_year);\n        }\n      } else {\n        full_year = \"\".concat(current_century - 1).concat(full_year);\n\n        if (current_year - parseInt(full_year, 10) < 100) {\n          return false;\n        }\n      }\n    }\n  } // Normalize day and check date validity\n\n\n  if (day > 60) {\n    day -= 60;\n  }\n\n  if (day < 10) {\n    day = \"0\".concat(day);\n  }\n\n  var date = \"\".concat(full_year, \"/\").concat(month, \"/\").concat(day);\n\n  if (date.length === 8) {\n    if (!(0, _isDate.default)(date, 'YY/MM/DD')) {\n      return false;\n    }\n  } else if (!(0, _isDate.default)(date, 'YYYY/MM/DD')) {\n    return false;\n  }\n\n  return algorithms.luhnCheck(tin.replace(/\\W/, ''));\n} // Locale lookup objects\n\n/*\n * Tax id regex formats for various locales\n *\n * Where not explicitly specified in DG-TAXUD document both\n * uppercase and lowercase letters are acceptable.\n */\n\n\nvar taxIdFormat = {\n  'bg-BG': /^\\d{10}$/,\n  'cs-CZ': /^\\d{6}\\/{0,1}\\d{3,4}$/,\n  'de-AT': /^\\d{9}$/,\n  'de-DE': /^[1-9]\\d{10}$/,\n  'dk-DK': /^\\d{6}-{0,1}\\d{4}$/,\n  'el-CY': /^[09]\\d{7}[A-Z]$/,\n  'el-GR': /^([0-4]|[7-9])\\d{8}$/,\n  'en-GB': /^\\d{10}$|^(?!GB|NK|TN|ZZ)(?![DFIQUV])[A-Z](?![DFIQUVO])[A-Z]\\d{6}[ABCD ]$/i,\n  'en-IE': /^\\d{7}[A-W][A-IW]{0,1}$/i,\n  'en-US': /^\\d{2}[- ]{0,1}\\d{7}$/,\n  'es-ES': /^(\\d{0,8}|[XYZKLM]\\d{7})[A-HJ-NP-TV-Z]$/i,\n  'et-EE': /^[1-6]\\d{6}(00[1-9]|0[1-9][0-9]|[1-6][0-9]{2}|70[0-9]|710)\\d$/,\n  'fi-FI': /^\\d{6}[-+A]\\d{3}[0-9A-FHJ-NPR-Y]$/i,\n  'fr-BE': /^\\d{11}$/,\n  'fr-FR': /^[0-3]\\d{12}$|^[0-3]\\d\\s\\d{2}(\\s\\d{3}){3}$/,\n  // Conforms both to official spec and provided example\n  'fr-LU': /^\\d{13}$/,\n  'hr-HR': /^\\d{11}$/,\n  'hu-HU': /^8\\d{9}$/,\n  'it-IT': /^[A-Z]{6}[L-NP-V0-9]{2}[A-EHLMPRST][L-NP-V0-9]{2}[A-ILMZ][L-NP-V0-9]{3}[A-Z]$/i,\n  'lv-LV': /^\\d{6}-{0,1}\\d{5}$/,\n  // Conforms both to DG TAXUD spec and original research\n  'mt-MT': /^\\d{3,7}[APMGLHBZ]$|^([1-8])\\1\\d{7}$/i,\n  'nl-NL': /^\\d{9}$/,\n  'pl-PL': /^\\d{10,11}$/,\n  'pt-BR': /^\\d{11,14}$/,\n  'pt-PT': /^\\d{9}$/,\n  'ro-RO': /^\\d{13}$/,\n  'sk-SK': /^\\d{6}\\/{0,1}\\d{3,4}$/,\n  'sl-SI': /^[1-9]\\d{7}$/,\n  'sv-SE': /^(\\d{6}[-+]{0,1}\\d{4}|(18|19|20)\\d{6}[-+]{0,1}\\d{4})$/\n}; // taxIdFormat locale aliases\n\ntaxIdFormat['lb-LU'] = taxIdFormat['fr-LU'];\ntaxIdFormat['lt-LT'] = taxIdFormat['et-EE'];\ntaxIdFormat['nl-BE'] = taxIdFormat['fr-BE']; // Algorithmic tax id check functions for various locales\n\nvar taxIdCheck = {\n  'bg-BG': bgBgCheck,\n  'cs-CZ': csCzCheck,\n  'de-AT': deAtCheck,\n  'de-DE': deDeCheck,\n  'dk-DK': dkDkCheck,\n  'el-CY': elCyCheck,\n  'el-GR': elGrCheck,\n  'en-IE': enIeCheck,\n  'en-US': enUsCheck,\n  'es-ES': esEsCheck,\n  'et-EE': etEeCheck,\n  'fi-FI': fiFiCheck,\n  'fr-BE': frBeCheck,\n  'fr-FR': frFrCheck,\n  'fr-LU': frLuCheck,\n  'hr-HR': hrHrCheck,\n  'hu-HU': huHuCheck,\n  'it-IT': itItCheck,\n  'lv-LV': lvLvCheck,\n  'mt-MT': mtMtCheck,\n  'nl-NL': nlNlCheck,\n  'pl-PL': plPlCheck,\n  'pt-BR': ptBrCheck,\n  'pt-PT': ptPtCheck,\n  'ro-RO': roRoCheck,\n  'sk-SK': skSkCheck,\n  'sl-SI': slSiCheck,\n  'sv-SE': svSeCheck\n}; // taxIdCheck locale aliases\n\ntaxIdCheck['lb-LU'] = taxIdCheck['fr-LU'];\ntaxIdCheck['lt-LT'] = taxIdCheck['et-EE'];\ntaxIdCheck['nl-BE'] = taxIdCheck['fr-BE']; // Regexes for locales where characters should be omitted before checking format\n\nvar allsymbols = /[-\\\\\\/!@#$%\\^&\\*\\(\\)\\+\\=\\[\\]]+/g;\nvar sanitizeRegexes = {\n  'de-AT': allsymbols,\n  'de-DE': /[\\/\\\\]/g,\n  'fr-BE': allsymbols\n}; // sanitizeRegexes locale aliases\n\nsanitizeRegexes['nl-BE'] = sanitizeRegexes['fr-BE'];\n/*\n * Validator function\n * Return true if the passed string is a valid tax identification number\n * for the specified locale.\n * Throw an error exception if the locale is not supported.\n */\n\nfunction isTaxID(str) {\n  var locale = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'en-US';\n  (0, _assertString.default)(str); // Copy TIN to avoid replacement if sanitized\n\n  var strcopy = str.slice(0);\n\n  if (locale in taxIdFormat) {\n    if (locale in sanitizeRegexes) {\n      strcopy = strcopy.replace(sanitizeRegexes[locale], '');\n    }\n\n    if (!taxIdFormat[locale].test(strcopy)) {\n      return false;\n    }\n\n    if (locale in taxIdCheck) {\n      return taxIdCheck[locale](strcopy);\n    } // Fallthrough; not all locales have algorithmic checks\n\n\n    return true;\n  }\n\n  throw new Error(\"Invalid locale '\".concat(locale, \"'\"));\n}\n\nmodule.exports = exports.default;\nmodule.exports.default = exports.default;"]},"metadata":{},"sourceType":"script"}